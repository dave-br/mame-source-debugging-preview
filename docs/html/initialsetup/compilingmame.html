<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compiling MAME &mdash; MAME Documentation 0.285 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=b01cfeae"></script>
        <script src="../_static/doctools.js?v=9bcbadda"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuring MAME" href="configuringmame.html" />
    <link rel="prev" title="Installing MAME" href="installingmame.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MAME Documentation
          </a>
              <div class="version">
                0.285
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatis.html">What is MAME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../healthwarning.html">Health Warnings</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting MAME prepared</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mameintro.html">An Introduction to MAME</a></li>
<li class="toctree-l2"><a class="reference internal" href="mameintro.html#purpose-of-mame">Purpose of MAME</a></li>
<li class="toctree-l2"><a class="reference internal" href="mameintro.html#systems-emulated-by-mame">Systems Emulated by MAME</a></li>
<li class="toctree-l2"><a class="reference internal" href="mameintro.html#supported-os">Supported OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="mameintro.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="mameintro.html#bios-dumps-and-software">BIOS Dumps and Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="installingmame.html">Installing MAME</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Compiling MAME</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuringmame.html">Configuring MAME</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usingmame/index.html">Basic MAME Usage and Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandline/index.html">MAME Command-line Usage and OS-Specific Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugger/index.html">MAME Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../luascript/index.html">Lua Scripting Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">MAME External Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to MAME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techspecs/index.html">Technical Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">MAME and security concerns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">The MAME License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MAME Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Getting MAME prepared</a></li>
      <li class="breadcrumb-item active">Compiling MAME</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="compiling-mame">
<h1>Compiling MAME<a class="headerlink" href="#compiling-mame" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#all-platforms" id="id1">All Platforms</a></p></li>
<li><p><a class="reference internal" href="#microsoft-windows" id="id2">Microsoft Windows</a></p>
<ul>
<li><p><a class="reference internal" href="#using-a-standard-msys2-installation" id="id3">Using a standard MSYS2 installation</a></p></li>
<li><p><a class="reference internal" href="#building-with-microsoft-visual-studio" id="id4">Building with Microsoft Visual Studio</a></p></li>
<li><p><a class="reference internal" href="#some-notes-about-the-msys2-environment" id="id5">Some notes about the MSYS2 environment</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fedora-linux" id="id6">Fedora Linux</a></p></li>
<li><p><a class="reference internal" href="#debian-and-ubuntu-including-raspberry-pi-and-odroid-devices" id="id7">Debian and Ubuntu (including Raspberry Pi and ODROID devices)</a></p></li>
<li><p><a class="reference internal" href="#arch-linux" id="id8">Arch Linux</a></p></li>
<li><p><a class="reference internal" href="#apple-macos" id="id9">Apple macOS</a></p></li>
<li><p><a class="reference internal" href="#emscripten-javascript-and-html" id="id10">Emscripten Javascript and HTML</a></p></li>
<li><p><a class="reference internal" href="#compiling-the-documentation" id="id11">Compiling the Documentation</a></p>
<ul>
<li><p><a class="reference internal" href="#compiling-the-documentation-on-microsoft-windows" id="id12">Compiling the Documentation on Microsoft Windows</a></p></li>
<li><p><a class="reference internal" href="#compiling-the-documentation-on-debian-and-ubuntu" id="id13">Compiling the Documentation on Debian and Ubuntu</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#useful-options" id="id14">Useful Options</a></p>
<ul>
<li><p><a class="reference internal" href="#overall-build-options" id="id15">Overall build options</a></p></li>
<li><p><a class="reference internal" href="#tool-locations" id="id16">Tool locations</a></p></li>
<li><p><a class="reference internal" href="#including-subsets-of-supported-systems" id="id17">Including subsets of supported systems</a></p></li>
<li><p><a class="reference internal" href="#optional-features" id="id18">Optional features</a></p></li>
<li><p><a class="reference internal" href="#compilation-options" id="id19">Compilation options</a></p></li>
<li><p><a class="reference internal" href="#library-framework-locations" id="id20">Library/framework locations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#known-issues" id="id21">Known Issues</a></p>
<ul>
<li><p><a class="reference internal" href="#issues-with-specific-compiler-versions" id="id22">Issues with specific compiler versions</a></p></li>
<li><p><a class="reference internal" href="#gnu-c-library-fortify-source-feature" id="id23">GNU C Library fortify source feature</a></p></li>
<li><p><a class="reference internal" href="#issues-affecting-mingw-clang" id="id24">Issues affecting MinGW clang</a></p></li>
<li><p><a class="reference internal" href="#issues-affecting-microsoft-visual-studio" id="id25">Issues affecting Microsoft Visual Studio</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#unusual-build-configurations" id="id26">Unusual Build Configurations</a></p>
<ul>
<li><p><a class="reference internal" href="#linking-using-the-llvm-linker" id="id27">Linking using the LLVM linker</a></p></li>
<li><p><a class="reference internal" href="#cross-compiling-mame" id="id28">Cross-compiling MAME</a></p></li>
<li><p><a class="reference internal" href="#using-libc-on-linux" id="id29">Using libc++ on Linux</a></p></li>
<li><p><a class="reference internal" href="#using-a-gcc-gnu-libstdc-installation-in-a-non-standard-location-on-linux" id="id30">Using a GCC/GNU libstdc++ installation in a non-standard location on Linux</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="all-platforms">
<span id="compiling-all"></span><h2><a class="toc-backref" href="#id1" role="doc-backlink">All Platforms</a><a class="headerlink" href="#all-platforms" title="Link to this heading">¶</a></h2>
<ul>
<li><p>To compile MAME, you need a C++17 compiler and runtime library.  We
support building with GCC version 10.3 or later and clang version 11
or later.  MAME should run with GNU libstdc++ version 10.3 or later or
libc++ version 11 or later.  The initial release of any major version
of GCC should be avoided.  For example, if you want to compile MAME
with GCC 12, you should use version 12.1 or later.</p></li>
<li><p>Whenever you are changing build parameters, (for example changing
optimisation settings, or adding tools to the compile list), or system
drivers sources are added, removed, or renamed, the project files need
to be regenerated.  You can do this by adding <strong>REGENIE=1</strong> to the
make arguments, or updating the modification time of the makefile (for
example using the <strong>touch</strong> command).  Failure to do this may cause
difficult to troubleshoot problems.</p></li>
<li><p>If you want to add various additional tools to the compile, such as
<em>chdman</em>, add a <strong>TOOLS=1</strong> to your make command, like
<strong>make REGENIE=1 TOOLS=1</strong></p></li>
<li><p>You can build an emulator for a subset of the systems supported by
MAME by using <em>SOURCES=&lt;driver&gt;,...</em> in your make command.  For
example
<strong>make SUBTARGET=pacem SOURCES=src/mame/pacman/pacman.cpp REGENIE=1</strong>
would build an emulator called <em>pacem</em> including the system drivers
from the source file pacman.cpp (<em>REGENIE=1</em> is specified to ensure
project files are regenerated).  You can specify folders to include
their entire contents, and you can separate multiple files/folders
with commas.  You can also omit the <em>src/mame/</em> prefix in many cases.</p>
<p>If you encounter linking errors after changing the included sources,
delete the static libraries for the subtarget from the build folder.
For the previous example on Windows using GCC, these would be in
<em>build/mingw-gcc/bin/x64/Release/mame_pacem</em> by default.</p>
</li>
<li><p>On a system with multiple CPU cores, compilation can be sped up by
compiling multiple source files in parallel.  This is done with the
<strong>-j</strong> parameter.  For instance, <strong>make -j5</strong> is a good starting point
on a system with a quad-core CPU.</p>
<p><em>Note: a good number to start with is the total number of CPU cores
in your system plus one.  An excessive number of concurrent jobs will
increase compilation time, particularly if the compiler jobs exhaust
available memory.  The optimal number depends on many factors,
including number of CPU cores, available RAM, disk and filesystem
performance, and memory bandwidth.</em></p>
</li>
<li><p>Debugging information can be added to a compile using <em>SYMBOLS=1</em>
though most users will not want or need to use this.  This increases
compile time and disk space used.  Note that a full build of MAME
including internal debugging symbols will exceed the maximum size for
an executable on Windows, and will not be possible to run without
first stripping the symbols.</p></li>
</ul>
<p>Putting all of these together, we get a couple of examples:</p>
<p>Rebuilding MAME on a dual-core (e.g. i3 or laptop i5) machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">j3</span>
</pre></div>
</div>
<p>Rebuilding MAME for just the Pac-Man and Galaxian families of systems,
with tools, on a quad-core (e.g. i5 or i7) machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">SUBTARGET</span><span class="o">=</span><span class="n">pacem</span> <span class="n">SOURCES</span><span class="o">=</span><span class="n">src</span><span class="o">/</span><span class="n">mame</span><span class="o">/</span><span class="n">pacman</span><span class="p">,</span><span class="n">src</span><span class="o">/</span><span class="n">mame</span><span class="o">/</span><span class="n">galaxian</span> <span class="n">TOOLS</span><span class="o">=</span><span class="mi">1</span> <span class="n">REGENIE</span><span class="o">=</span><span class="mi">1</span> <span class="o">-</span><span class="n">j5</span>
</pre></div>
</div>
<p>Rebuilding MAME for just the Apple II systems, compiling up to six
sources in parallel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">SUBTARGET</span><span class="o">=</span><span class="n">appulator</span> <span class="n">SOURCES</span><span class="o">=</span><span class="n">apple</span><span class="o">/</span><span class="n">apple2</span><span class="o">.</span><span class="n">cpp</span><span class="p">,</span><span class="n">apple</span><span class="o">/</span><span class="n">apple2e</span><span class="o">.</span><span class="n">cpp</span><span class="p">,</span><span class="n">apple</span><span class="o">/</span><span class="n">apple2gs</span><span class="o">.</span><span class="n">cpp</span> <span class="n">REGENIE</span><span class="o">=</span><span class="mi">1</span> <span class="o">-</span><span class="n">j6</span>
</pre></div>
</div>
</section>
<section id="microsoft-windows">
<span id="compiling-windows"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">Microsoft Windows</a><a class="headerlink" href="#microsoft-windows" title="Link to this heading">¶</a></h2>
<p>MAME for Windows is built using the MSYS2 environment.  You will need Windows 7
or later and a reasonably up-to-date MSYS2 installation.  We strongly recommend
building MAME on a 64-bit system.  Instructions may need to be adjusted for
32-bit systems.  Building for 64-bit ARM (AArch64) requires a 64-bit ARM system
running Windows 11 or later.</p>
<ul class="simple">
<li><p>A pre-packaged MSYS2 installation including the prerequisites for building
MAME for 64-bit x86-64 can be downloaded from the <a class="reference external" href="http://mamedev.org/tools/">MAME Build Tools</a> page.</p></li>
<li><p>After initial installation, you can update the MSYS2 environment using the
<strong>pacman</strong> (Arch package manage) command.</p></li>
<li><p>By default, MAME will be built using native Windows OS interfaces for
window management, audio/video output, font rendering, etc.  If you want to
use the portable SDL (Simple DirectMedia Layer) interfaces instead, you can
add <strong>OSD=sdl</strong> to the make options.  The main emulator binary will have an
<code class="docutils literal notranslate"><span class="pre">sdl</span></code> prefix prepended (e.g. <code class="docutils literal notranslate"><span class="pre">sdlmame.exe</span></code>).  You
will need to install the MSYS2 packages for SDL 2 version 2.0.14 or later.</p></li>
<li><p>By default, MAME will include the native Windows debugger.  To also include
the portable Qt debugger, add <strong>USE_QTDEBUG=1</strong> to the make options.  You
will need to install the MSYS2 packages for Qt 5.</p></li>
</ul>
<section id="using-a-standard-msys2-installation">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Using a standard MSYS2 installation</a><a class="headerlink" href="#using-a-standard-msys2-installation" title="Link to this heading">¶</a></h3>
<p>You may also build MAME using a standard MSYS2 installation and adding the tools
needed for building MAME.  These instructions assume you have some familiarity
with MSYS2 and the <strong>pacman</strong> package manager.</p>
<ul class="simple">
<li><p>Install the MSYS2 environment from  the <a class="reference external" href="https://www.msys2.org/">MSYS2 homepage</a>.</p></li>
<li><p>Download the latest version of the <code class="docutils literal notranslate"><span class="pre">mame-essentials</span></code> package from the
<a class="reference external" href="https://repo.mamedev.org/x86_64/">MAME package repository</a> and install it
using the <strong>pacman</strong> command.</p></li>
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">mame</span></code> package repository to <code class="docutils literal notranslate"><span class="pre">/etc/pacman.conf</span></code> using
<code class="docutils literal notranslate"><span class="pre">/etc/pacman.d/mirrorlist.mame</span></code> for locations, and disable signature
verification for this repository (<code class="docutils literal notranslate"><span class="pre">SigLevel</span> <span class="pre">=</span> <span class="pre">Never</span></code>).</p></li>
<li><p>Install packages necessary to build MAME.  At the very least, you’ll need
<code class="docutils literal notranslate"><span class="pre">bash</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p></li>
<li><p>For debugging you may want to install <code class="docutils literal notranslate"><span class="pre">gdb</span></code>.</p></li>
<li><p>To build the HTML user/developer documentation, you’ll need
<code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-librsvg</span></code>, <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-python-sphinx</span></code>,
<code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-python-sphinx_rtd_theme</span></code> and
<code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-python-sphinxcontrib-svg2pdfconverter</span></code> for a 64-bit MinGW
environment (or alternatively <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-librsvg</span></code>,
<code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-python-sphinx</span></code>, <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-python-sphinx_rtd_theme</span></code>
and <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-python-sphinxcontrib-svg2pdfconverter</span></code> a 32-bit MinGW
environment).</p></li>
<li><p>To build the PDF documentation, you’ll additionally need
<code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-texlive-latex-extra</span></code> and
<code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-texlive-fonts-recommended</span></code> (or
<code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-texlive-latex-extra</span></code> and
<code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-texlive-fonts-recommended</span></code> for a 32-bit MinGW environment).</p></li>
<li><p>To generate API documentation from source, you’ll need <code class="docutils literal notranslate"><span class="pre">doxygen</span></code>.</p></li>
<li><p>If you plan to rebuild bgfx shaders and you want to rebuild the GLSL parser,
you’ll need <code class="docutils literal notranslate"><span class="pre">bison</span></code>.</p></li>
</ul>
<p>The additional packages you’ll need depend on the CPU architecture you’re
building for.</p>
<p><strong>64-bit x86-64</strong></p>
<ul class="simple">
<li><p>You’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-python</span></code>.</p></li>
<li><p>To link using the LLVM linker (generally much faster than the GNU linker),
you’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-lld</span></code>, <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-llvm</span></code> and
<code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-libc++</span></code>.</p></li>
<li><p>To build against the portable SDL interfaces, you’ll need
<code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-SDL2</span></code> and <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-SDL2_ttf</span></code>.</p></li>
<li><p>To build the Qt debugger, you’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-x86_64-qt5</span></code>.</p></li>
<li><p>Open the <strong>mingw64.exe</strong> helper from the <strong>msys64</strong> installation folder or the
<strong>MSYS2 MinGW 64-bit</strong> shortcut from the start menu to start a Bash shell
configured with the correct paths and environment variables.</p></li>
</ul>
<p><strong>32-bit x86</strong></p>
<ul class="simple">
<li><p>You’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-python</span></code>.</p></li>
<li><p>To link using the LLVM linker (generally much faster than the GNU linker),
you’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-lld</span></code>, <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-llvm</span></code> and
<code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-libc++</span></code>.</p></li>
<li><p>To build against the portable SDL interfaces, you’ll need
<code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-SDL2</span></code> and <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-SDL2_ttf</span></code>.</p></li>
<li><p>To build the Qt debugger, you’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-i686-qt5</span></code>.</p></li>
<li><p>Open the <strong>mingw32.exe</strong> helper from the <strong>msys64</strong> installation folder or the
<strong>MSYS2 MinGW 32-bit</strong> shortcut from the start menu to start a Bash shell
configured with the correct paths and environment variables.</p></li>
</ul>
<p><strong>64-bit ARM (AArch64)</strong></p>
<ul class="simple">
<li><p>You’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-clang</span></code>,
<code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-python</span></code> and <code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-gcc-compat</span></code>.</p></li>
<li><p>To link using the LLVM linker (generally much faster than the GNU linker),
you’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-lld</span></code>, <code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-llvm</span></code>
and <code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-libc++</span></code>.</p></li>
<li><p>To build against the portable SDL interfaces, you’ll need
<code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-SDL2</span></code> and <code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-SDL2_ttf</span></code>.</p></li>
<li><p>To build the Qt debugger, you’ll need <code class="docutils literal notranslate"><span class="pre">mingw-w64-clang-aarch64-qt5</span></code>.</p></li>
<li><p>Open the <strong>clangarm64.exe</strong> helper from the <strong>msys64</strong> installation folder to
start a Bash shell configured with the correct paths and environment
variables.</p></li>
</ul>
<p>For example you could use these commands to ensure you have the packages you
need to compile MAME, omitting the ones for configurations you don’t plan to
build for or combining multiple <strong>pacman</strong> commands to install more packages at
once:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">curl</span> <span class="n">git</span> <span class="n">make</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">gcc</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">python</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">llvm</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">libc</span><span class="o">++</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">lld</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">SDL2</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">SDL2_ttf</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qt5</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">gcc</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">python</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">llvm</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">libc</span><span class="o">++</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">lld</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">SDL2</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">SDL2_ttf</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">i686</span><span class="o">-</span><span class="n">qt5</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">clang</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">python</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">gcc</span><span class="o">-</span><span class="n">compat</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">lld</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">llvm</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">libc</span><span class="o">++</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">SDL2</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">SDL2_ttf</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">clang</span><span class="o">-</span><span class="n">aarch64</span><span class="o">-</span><span class="n">qt5</span>
</pre></div>
</div>
<p>You could use these commands to install the current version of the
mame-essentials package and add the MAME package repository to your pacman
configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">O</span> <span class="s2">&quot;https://repo.mamedev.org/x86_64/mame-essentials-1.0.6-1-x86_64.pkg.tar.xz&quot;</span>
<span class="n">pacman</span> <span class="o">-</span><span class="n">U</span> <span class="n">mame</span><span class="o">-</span><span class="n">essentials</span><span class="o">-</span><span class="mf">1.0.6</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">pkg</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
<span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">[mame]</span><span class="se">\n</span><span class="s1">Include = /etc/pacman.d/mirrorlist.mame</span><span class="se">\n</span><span class="s1">SigLevel = Never&#39;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pacman</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
</section>
<section id="building-with-microsoft-visual-studio">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Building with Microsoft Visual Studio</a><a class="headerlink" href="#building-with-microsoft-visual-studio" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>You can generate Visual Studio 2022 projects using <strong>make vs2022</strong>.  The
solution and project files will be created in
<code class="docutils literal notranslate"><span class="pre">build/projects/windows/mame/vs2022</span></code> by default (the name of the <code class="docutils literal notranslate"><span class="pre">build</span></code>
folder can be changed using the <code class="docutils literal notranslate"><span class="pre">BUILDDIR</span></code> option).  This will always
regenerate the settings, so <strong>REGENIE=1</strong> is <em>not</em> needed.</p></li>
<li><p>Adding <strong>MSBUILD=1</strong> to the make options will build the solution using
the Microsoft Build Engine after generating the project files.  Note that this
requires paths and environment variables to be configured so the correct
Visual Studio tools can be located; please refer to the Microsoft-provided
instructions on <a class="reference external" href="https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line">using the Microsoft C++ toolset from the command line</a>.
You may find it easier to not use <strong>MSBUILD=1</strong> and load the project file into
Visual Studio’s GUI for compilation.</p></li>
<li><p>The MSYS2 environment is still required to generate the project files, convert
built-in layouts, compile UI translations, etc.</p></li>
</ul>
</section>
<section id="some-notes-about-the-msys2-environment">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Some notes about the MSYS2 environment</a><a class="headerlink" href="#some-notes-about-the-msys2-environment" title="Link to this heading">¶</a></h3>
<p>MSYS2 uses the pacman tool from Arch Linux for package management.  There is a
<a class="reference external" href="https://wiki.archlinux.org/index.php/Pacman">page on the Arch Linux wiki</a>
with helpful information on using the pacman package management tool.</p>
<p>The MSYS2 environment includes two kinds of tools: MSYS2 tools designed to work
in a UNIX-like environment on top of Windows, and MinGW tools designed to work
in a more Windows-like environment.  The MSYS2 tools are installed in
<code class="docutils literal notranslate"><span class="pre">/usr/bin</span></code> while the MinGW tools are installed in <code class="docutils literal notranslate"><span class="pre">/ming64/bin</span></code>,
<code class="docutils literal notranslate"><span class="pre">/mingw32/bin</span></code> and/or <code class="docutils literal notranslate"><span class="pre">/clangarm64/bin</span></code> (relative to the MSYS2 installation
directory).  MSYS2 tools work best in an MSYS2 terminal, while MinGW tools work
best in a Microsoft command prompt.</p>
<p>The most obvious symptom of this is that arrow keys don’t work in interactive
programs if you run them in the wrong kind of terminal.  If you run MinGW gdb or
python from an MSYS2 terminal window, command history won’t work and it may not
be possible to interrupt an attached program with gdb.  Similarly it may be very
difficult to edit using MSYS2 vim in a Microsoft command prompt window.</p>
<p>MAME is built using the MinGW compilers, so the MinGW directories are included
earlier in the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable for the build environments.  If you
want to use an interactive MSYS2 program from an MSYS2 shell, you may need to
type the absolute path to avoid using the MinGW equivalent instead.</p>
<p>MSYS2 gdb may have issues debugging MinGW programs like MAME.  You may get
better results by installing the MinGW version of gdb and running it from a
Microsoft command prompt window to debug MAME.</p>
<p>GNU make supports both POSIX-style shells (e.g. bash) and the Microsoft cmd.exe
shell.  One issue to be aware of when using the cmd.exe shell is that the
<code class="docutils literal notranslate"><span class="pre">copy</span></code> command doesn’t provide a useful exit status, so file copy tasks can
fail silently.  This may cause your build to appear to succeed while producing
incorrect results.</p>
<p>It is not possible to cross-compile a 32-bit version of MAME using 64-bit MinGW
tools on Windows, the 32-bit MinGW tools must be used.  This causes issues due
to the size of MAME.  It’s impossible to make a 32-bit build with full local
variable symbols.  GCC may run out of memory, and certain source files may
exceed the limit of 32,768 sections imposed by the PE/COFF object file format.</p>
<p>A complete build of MAME including line number symbols exceeds the size limit
imposed by the PE file format and cannot be run.  Workarounds include including
only a subset of the systems supported by MAME or extracting symbols to a
separate file and stripping excess symbols from the MAME executable.</p>
</section>
</section>
<section id="fedora-linux">
<span id="compiling-fedora"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink">Fedora Linux</a><a class="headerlink" href="#fedora-linux" title="Link to this heading">¶</a></h2>
<p>You’ll need a few prerequisites from your Linux distribution.  Make sure you get
SDL 2 version 2.0.14 or later as earlier versions lack required functionality:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">gcc</span> <span class="n">gcc</span><span class="o">-</span><span class="n">c</span><span class="o">++</span> <span class="n">SDL2</span><span class="o">-</span><span class="n">devel</span> <span class="n">SDL2_ttf</span><span class="o">-</span><span class="n">devel</span> <span class="n">libXi</span><span class="o">-</span><span class="n">devel</span> <span class="n">libXinerama</span><span class="o">-</span><span class="n">devel</span> <span class="n">qt5</span><span class="o">-</span><span class="n">qtbase</span><span class="o">-</span><span class="n">devel</span> <span class="n">qt5</span><span class="o">-</span><span class="n">qttools</span> <span class="n">expat</span><span class="o">-</span><span class="n">devel</span> <span class="n">fontconfig</span><span class="o">-</span><span class="n">devel</span> <span class="n">alsa</span><span class="o">-</span><span class="n">lib</span><span class="o">-</span><span class="n">devel</span> <span class="n">pulseaudio</span><span class="o">-</span><span class="n">libs</span><span class="o">-</span><span class="n">devel</span>
</pre></div>
</div>
<p>If you want to use the more efficient LLVM tools for archiving static libraries
and linking, you’ll need to install the corresponding packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">lld</span> <span class="n">llvm</span>
</pre></div>
</div>
<p>Compilation is exactly as described above in All Platforms.</p>
<p>To build the HTML user/developer documentation, you’ll need Sphinx, as well as
the theme and the SVG converter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">sphinx</span> <span class="n">python3</span><span class="o">-</span><span class="n">sphinx_rtd_theme</span> <span class="n">python3</span><span class="o">-</span><span class="n">sphinxcontrib</span><span class="o">-</span><span class="n">rsvgconverter</span>
</pre></div>
</div>
<p>The HTML documentation can be built with this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">C</span> <span class="n">docs</span> <span class="n">SPHINXBUILD</span><span class="o">=</span><span class="n">sphinx</span><span class="o">-</span><span class="n">build</span><span class="o">-</span><span class="mi">3</span> <span class="n">html</span>
</pre></div>
</div>
</section>
<section id="debian-and-ubuntu-including-raspberry-pi-and-odroid-devices">
<span id="compiling-ubuntu"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink">Debian and Ubuntu (including Raspberry Pi and ODROID devices)</a><a class="headerlink" href="#debian-and-ubuntu-including-raspberry-pi-and-odroid-devices" title="Link to this heading">¶</a></h2>
<p>You’ll need a few prerequisites from your Linux distribution.  Make sure you get
SDL 2 version 2.0.14 or later as earlier versions lack required functionality:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">git</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span> <span class="n">python3</span> <span class="n">libsdl2</span><span class="o">-</span><span class="n">dev</span> <span class="n">libsdl2</span><span class="o">-</span><span class="n">ttf</span><span class="o">-</span><span class="n">dev</span> <span class="n">libfontconfig</span><span class="o">-</span><span class="n">dev</span> <span class="n">libpulse</span><span class="o">-</span><span class="n">dev</span> <span class="n">qtbase5</span><span class="o">-</span><span class="n">dev</span> <span class="n">qtbase5</span><span class="o">-</span><span class="n">dev</span><span class="o">-</span><span class="n">tools</span> <span class="n">qtchooser</span> <span class="n">qt5</span><span class="o">-</span><span class="n">qmake</span>
</pre></div>
</div>
<p>Compilation is exactly as described above in All Platforms.  Note the Ubuntu
Linux modifies GCC to enable the GNU C Library “fortify source” feature by
default, which may cause issues compiling MAME (see <a class="reference internal" href="#compiling-issues"><span class="std std-ref">Known Issues</span></a>).</p>
</section>
<section id="arch-linux">
<span id="compiling-arch"></span><h2><a class="toc-backref" href="#id8" role="doc-backlink">Arch Linux</a><a class="headerlink" href="#arch-linux" title="Link to this heading">¶</a></h2>
<p>You’ll need a few prerequisites from your distro:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">base</span><span class="o">-</span><span class="n">devel</span> <span class="n">git</span> <span class="n">sdl2_ttf</span> <span class="n">python</span> <span class="n">libxinerama</span> <span class="n">libpulse</span> <span class="n">alsa</span><span class="o">-</span><span class="n">lib</span> <span class="n">qt5</span><span class="o">-</span><span class="n">base</span>
</pre></div>
</div>
<p>Compilation is exactly as described above in All Platforms.</p>
</section>
<section id="apple-macos">
<span id="compiling-macos"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">Apple macOS</a><a class="headerlink" href="#apple-macos" title="Link to this heading">¶</a></h2>
<p>You’ll need a few prerequisites to get started.  Make sure you’re on macOS 11.0
Big Sur or later.  You will need SDL 2 version 2.0.14 or later.  You’ll also
need to install Python 3 – it’s currently included with the Xcode command line
tools, but you can also install a stand-alone version or get it via the Homebrew
package manager.</p>
<ul class="simple">
<li><p>Install <strong>Xcode</strong> from the Mac App Store or
<a class="reference external" href="https://developer.apple.com/download/more/">ADC</a> (AppleID required).</p></li>
<li><p>To find the corresponding Xcode for your MacOS release please visit
<a class="reference external" href="https://xcodereleases.com">xcodereleases.com</a> to find the latest version of
Xcode available to you.</p></li>
<li><p>Launch <strong>Xcode</strong>. It will download a few additional prerequisites.  Let this
run through before proceeding.</p></li>
<li><p>Once that’s done, quit <strong>Xcode</strong> and open a <strong>Terminal</strong> window.</p></li>
<li><p>Type <strong>xcode-select --install</strong> to install additional tools necessary for MAME
(also available as a package on ADC).</p></li>
</ul>
<p>Next you’ll need to get SDL 2 installed.</p>
<ul class="simple">
<li><p>Go to <a class="reference external" href="http://libsdl.org/download-2.0.php">this site</a> and download the
<em>macOS</em> .dmg file</p></li>
<li><p>If the .dmg doesn’t open automatically, open it</p></li>
<li><p>Click “Macintosh HD” (or whatever your Mac’s hard disk is named) in the left
pane of a <strong>Finder</strong> window, then open the <strong>Library</strong> folder and drag the
<strong>SDL2.framework</strong> folder from the SDL disk image into the <strong>Frameworks</strong>
folder. You will have to authenticate with your user password.</p></li>
</ul>
<p>If you don’t already have it, get Python 3 set up:</p>
<ul class="simple">
<li><p>Go to the official Python site, navigate to the
<a class="reference external" href="https://www.python.org/downloads/macos/">releases for macOS</a>, and click the
link to download the installer for the latest stable release (this was
<a class="reference external" href="https://www.python.org/ftp/python/3.10.4/python-3.10.4-macos11.pkg">Python 3.10.4</a>
at the time of writing).</p></li>
<li><p>Scroll down to the “Files” section, and download the macOS version (called
“macOS 64-bit universal2 installer” or similar).</p></li>
<li><p>Once the package downloads, open it and follow the standard installation
process.</p></li>
</ul>
<p>Finally to begin compiling, use Terminal to navigate to where you have the MAME
source tree (<em>cd</em> command) and follow the normal compilation instructions from
above in All Platforms.</p>
</section>
<section id="emscripten-javascript-and-html">
<span id="compiling-emscripten"></span><h2><a class="toc-backref" href="#id10" role="doc-backlink">Emscripten Javascript and HTML</a><a class="headerlink" href="#emscripten-javascript-and-html" title="Link to this heading">¶</a></h2>
<p>First, download and install Emscripten 3.1.35 or later by following the
instructions at the <a class="reference external" href="https://emscripten.org/docs/getting_started/downloads.html">official site</a>.</p>
<p>Once Emscripten has been installed, it should be possible to compile MAME
out-of-the-box using Emscripten’s <strong>emmake</strong> tool. Because a full MAME
compile is too large to load into a web browser at once, you will want to use
the SOURCES parameter to compile only a subset of the project, e.g. (in the
MAME directory):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>emmake<span class="w"> </span>make<span class="w"> </span><span class="nv">SUBTARGET</span><span class="o">=</span>pacmantest<span class="w"> </span><span class="nv">SOURCES</span><span class="o">=</span>src/mame/pacman/pacman.cpp
</pre></div>
</div>
<p>The <strong>SOURCES</strong> parameter should have the path to at least one driver <strong>.cpp</strong>
file.  The make process will attempt to locate and include all dependencies
necessary to produce a complete build including the specified driver(s).
However, sometimes it is necessary to manually specify additional files (using
commas) if this process misses something. e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>emmake<span class="w"> </span>make<span class="w"> </span><span class="nv">SUBTARGET</span><span class="o">=</span>apple2e<span class="w"> </span><span class="nv">SOURCES</span><span class="o">=</span>src/mame/apple/apple2e.cpp,src/devices/machine/applefdc.cpp
</pre></div>
</div>
<p>The value of the <strong>SUBTARGET</strong> parameter serves only to differentiate multiple
builds and need not be set to any specific value.</p>
<p>Emscripten supports compiling to WebAssembly with a JavaScript loader instead of
all-JavaScript, and in later versions this is actually the default. To force
WebAssembly on or off, add <strong>WEBASSEMBLY=1</strong> or <strong>WEBASSEMBLY=0</strong> to the make
command line, respectively.</p>
<p>Other make parameters can also be used, e.g. <strong>-j</strong> for multithreaded
compilation as described earlier.</p>
<p>When the compilation reaches the emcc phase, you may see a number of
<em>&quot;unresolved symbol&quot;</em> warnings.  At the moment, this is expected for
OpenGL-related functions such as glPointSize.  Any others may indicate that an
additional dependency file needs to be specified in the <strong>SOURCES</strong> list.
Unfortunately this process is not automated and you will need to search the
source tree to locate the files supplying the missing symbols.  You may also be
able to get away with ignoring the warnings if the code path referencing them is
not used at run-time.</p>
<p>If all goes well, a <strong>.js</strong> file will be output to the current directory.  This
file cannot be run by itself, but requires an HTML loader to provide it with a
canvas to draw to and to pass in command-line parameters.  The
<a class="reference external" href="https://github.com/db48x/emularity">Emularity project</a> provides such a
loader.</p>
<p>There are example <strong>.html</strong> files in that repository which can be edited to
point to your newly compiled MAME <strong>.js</strong> file and pass in whatever parameters
you desire. You will then need to place all of the following on a web server:</p>
<ul class="simple">
<li><p>The compiled MAME <strong>.js</strong> file</p></li>
<li><p>The compiled MAME <strong>.wasm</strong> file if using WebAssembly</p></li>
<li><p>The <strong>.js</strong> files from the Emularity package (<strong>loader.js</strong>, <strong>browserfs.js</strong>,
etc.)</p></li>
<li><p>A <strong>.zip</strong> file with the ROMs for the MAME driver you would like to run (if
any)</p></li>
<li><p>Any software files you would like to run with the MAME driver</p></li>
<li><p>An Emularity loader <strong>.html</strong> modified to point to all of the above</p></li>
</ul>
<p>You need to use a web server instead of opening the local files directly due to
security restrictions in modern web browsers.</p>
<p>If the result fails to run, you can open the Web Console in your browser to see
any error output which may have been produced (e.g. missing or incorrect ROM
files).  A “ReferenceError: foo is not defined” error most likely indicates that
a needed source file was omitted from the <strong>SOURCES</strong> list.</p>
</section>
<section id="compiling-the-documentation">
<span id="compiling-docs"></span><h2><a class="toc-backref" href="#id11" role="doc-backlink">Compiling the Documentation</a><a class="headerlink" href="#compiling-the-documentation" title="Link to this heading">¶</a></h2>
<p>Compiling the documentation will require you to install several packages
depending on your operating system.</p>
<section id="compiling-the-documentation-on-microsoft-windows">
<span id="compiling-docs-windows"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">Compiling the Documentation on Microsoft Windows</a><a class="headerlink" href="#compiling-the-documentation-on-microsoft-windows" title="Link to this heading">¶</a></h3>
<p>On Windows, you’ll need a couple of packages from the MSYS2 environment. You
can install these packages with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pacman<span class="w"> </span>-S<span class="w"> </span>mingw-w64-x86_64-librsvg<span class="w"> </span>mingw-w64-x86_64-python-sphinx<span class="w"> </span>mingw-w64-x86_64-python-sphinxcontrib-svg2pdfconverter
</pre></div>
</div>
<p>If you intend to make a PDF via LaTeX, you’ll need to install a LaTeX
distribution such as TeX Live:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pacman<span class="w"> </span>-S<span class="w"> </span>mingw-w64-x86_64-texlive-fonts-recommended<span class="w"> </span>mingw-w64-x86_64-texlive-latex-extra
</pre></div>
</div>
</section>
<section id="compiling-the-documentation-on-debian-and-ubuntu">
<span id="compiling-docs-debian"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink">Compiling the Documentation on Debian and Ubuntu</a><a class="headerlink" href="#compiling-the-documentation-on-debian-and-ubuntu" title="Link to this heading">¶</a></h3>
<p>On Debian/Ubuntu flavors of Linux, you’ll need <strong>python3-sphinx/python-sphinx</strong>
and the <strong>python3-pip/python-pip</strong> packages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python3-sphinx<span class="w"> </span>python3-pip
pip3<span class="w"> </span>install<span class="w"> </span>sphinxcontrib-svg2pdfconverter
</pre></div>
</div>
<p>On Debian, you’ll need to install the <strong>librsvg2-bin</strong> package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>librsvg2-bin
</pre></div>
</div>
<p>If you intend to make a PDF via LaTeX, you’ll need to install a LaTeX
distribution such as TeX Live:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>librsvg2-bin<span class="w"> </span>latexmk<span class="w"> </span>texlive<span class="w"> </span>texlive-science<span class="w"> </span>texlive-formats-extra
</pre></div>
</div>
<p>From this point you can do <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">latexpdf</span></code> from the <strong>docs</strong>
folder to generate the output of your choice. Typing <code class="docutils literal notranslate"><span class="pre">make</span></code> by itself will
tell you all available formats. The output will be in the docs/build folder in
a subfolder based on the type chosen (e.g. <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> will create
<em>docs/build/html</em> with the output.)</p>
</section>
</section>
<section id="useful-options">
<span id="compiling-options"></span><h2><a class="toc-backref" href="#id14" role="doc-backlink">Useful Options</a><a class="headerlink" href="#useful-options" title="Link to this heading">¶</a></h2>
<p>This section summarises some of the more useful options recognised by the main
makefile.  You use these options by appending them to the <strong>make</strong> command,
setting them as environment variables, or adding them to your prefix makefile.
Note that in order to apply many of these settings when rebuilding, you need to
set <strong>REGENIE=1</strong> the first time you build after changing the option(s).  Also
note that GENie <em>does not</em> automatically rebuild affected files when you change
an option that affects compiler settings.</p>
<section id="overall-build-options">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Overall build options</a><a class="headerlink" href="#overall-build-options" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>PREFIX_MAKEFILE</dt><dd><p>Name of a makefile to include for additional options if found (defaults to
<strong>useroptions.mak</strong>).  May be useful if you want to quickly switch between
different build configurations.</p>
</dd>
<dt>BUILDDIR</dt><dd><p>Set to change the name of the subfolder used for project files, generated
sources, object files, and intermediate libraries (defaults to <strong>build</strong>).</p>
</dd>
<dt>REGENIE</dt><dd><p>Set to <strong>1</strong> to force project files to be regenerated.</p>
</dd>
<dt>VERBOSE</dt><dd><p>Set to <strong>1</strong> to show full commands when using GNU make as the build tool.
This option applies immediately without needing regenerate project files.</p>
</dd>
<dt>IGNORE_GIT</dt><dd><p>Set to <strong>1</strong> to skip the working tree scan and not attempt to embed a git
revision description in the version string.</p>
</dd>
</dl>
</section>
<section id="tool-locations">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Tool locations</a><a class="headerlink" href="#tool-locations" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>OVERRIDE_CC</dt><dd><p>Set the C/Objective-C compiler command.  (This sets the target C compiler
command when cross-compiling.)</p>
</dd>
<dt>OVERRIDE_CXX</dt><dd><p>Set the C++/Objective-C++ compiler command.  (This sets the target C++
compiler command when cross-compiling.)</p>
</dd>
<dt>OVERRIDE_LD</dt><dd><p>Set the linker command.  This is often not necessary or useful because the C
or C++ compiler command is used to invoke the linker.  (This sets the target
linker command when cross-compiling.)</p>
</dd>
<dt>PYTHON_EXECUTABLE</dt><dd><p>Set the Python interpreter command.  You need Python 3.2 or later to build
MAME.</p>
</dd>
<dt>CROSS_BUILD</dt><dd><p>Set to <strong>1</strong> to use separate host and target compilers and linkers, as
required for cross-compilation.  In this case, <strong>OVERRIDE_CC</strong>,
<strong>OVERRIDE_CXX</strong> and <strong>OVERRIDE_LD</strong> set the target C compiler, C++ compiler
and linker commands, while <strong>CC</strong>, <strong>CXX</strong> and <strong>LD</strong> set the host C
compiler, C++ compiler and linker commands.</p>
</dd>
</dl>
</section>
<section id="including-subsets-of-supported-systems">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Including subsets of supported systems</a><a class="headerlink" href="#including-subsets-of-supported-systems" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>SUBTARGET</dt><dd><p>Set emulator subtarget to build.  Some pre-defined subtargets are provided,
using Lua scripts in <em>scripts/target/mame</em> and system driver filter files in
<em>src/mame</em>.  User-defined subtargets can be created using the <strong>SOURCES</strong>
or <strong>SOURCEFILTER</strong> option.</p>
</dd>
<dt>SOURCES</dt><dd><p>Specify system driver source files and/or folders to include.  Usually used
in conjunction with the <strong>SUBTARGET</strong> option.  Separate multiple
files/folders with commas.</p>
</dd>
<dt>SOURCEFILTER</dt><dd><p>Specify a system driver filter file.  Usually used in conjunction with the
<strong>SUBTARGET</strong> option.  The filter file can specify source files to include
system drivers from, and individual system drivers to include or exclude.
There are some example system driver filter files in the <em>src/mame</em> folder.</p>
</dd>
</dl>
</section>
<section id="optional-features">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Optional features</a><a class="headerlink" href="#optional-features" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>TOOLS</dt><dd><p>Set to <strong>1</strong> to build additional tools along with the emulator, including
<strong>unidasm</strong>, <strong>chdman</strong>, <strong>romcmp</strong>, and <strong>srcclean</strong>.</p>
</dd>
<dt>EMULATOR</dt><dd><p>When set to <strong>0</strong>, the main emulator target will not be created.  This is
intended to be used in conjunction with setting <strong>TOOLS</strong> to <strong>1</strong> to build
the additional tools without building the emulator.</p>
</dd>
<dt>NO_OPENGL</dt><dd><p>Set to <strong>1</strong> to disable building the OpenGL video output module.</p>
</dd>
<dt>NO_USE_PORTAUDIO</dt><dd><p>Set to <strong>1</strong> to disable building the PortAudio sound output module and the
PortAudio library.</p>
</dd>
<dt>NO_USE_PULSEAUDIO</dt><dd><p>Set to <strong>1</strong> to disable building the PulseAudio sound output module on
Linux.</p>
</dd>
<dt>USE_WAYLAND</dt><dd><p>Set to <strong>1</strong> to include support for bgfx video output with the Wayland
display server.</p>
</dd>
<dt>USE_TAPTUN</dt><dd><p>Set to <strong>1</strong> to include the tap/tun network module, or set to <strong>0</strong> to
disable building the tap/tun network module.  The tap/tun network module is
included by default on Windows and Linux.</p>
</dd>
<dt>USE_PCAP</dt><dd><p>Set to <strong>1</strong> to include the pcap network module, or set to <strong>0</strong> to disable
building the pcap network module.  The pcap network module is included by
default on macOS and NetBSD.</p>
</dd>
<dt>USE_QTDEBUG</dt><dd><p>Set to <strong>1</strong> to include the Qt debugger on platforms where it’s not built by
default (e.g. Windows or macOS), or to <strong>0</strong> to disable it.  You’ll need to
install Qt development libraries and tools to build the Qt debugger.  The
process depends on the platform.</p>
</dd>
</dl>
</section>
<section id="compilation-options">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Compilation options</a><a class="headerlink" href="#compilation-options" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>NOWERROR</dt><dd><p>Set to <strong>1</strong> to disable treating compiler warnings as errors.  This may be
needed in marginally supported configurations.</p>
</dd>
<dt>DEPRECATED</dt><dd><p>Set to <strong>0</strong> to disable deprecation warnings (note that deprecation warnings
are not treated as errors).</p>
</dd>
<dt>DEBUG</dt><dd><p>Set to <strong>1</strong> to enable runtime assertion checks and additional diagnostics.
Note that this has a performance cost, and is most useful for developers.</p>
</dd>
<dt>OPTIMIZE</dt><dd><p>Set optimisation level.  The default is <strong>3</strong> to favour performance at the
expense of larger executable size.  Set to <strong>0</strong> to disable optimisation
(can make debugging easier), <strong>1</strong> for basic optimisation that doesn’t have
a space/speed trade-off and doesn’t have a large impact on compile time,
<strong>2</strong> to enable most optimisation that improves performance and reduces
size, or <strong>s</strong> to enable only optimisations that generally don’t increase
executable size.  The exact set of supported values depends on your
compiler.</p>
</dd>
<dt>SYMBOLS</dt><dd><p>Set to <strong>1</strong> to include additional debugging symbols over the default for
the target platform (many target platforms include function name symbols by
default).</p>
</dd>
<dt>SYMLEVEL</dt><dd><p>Numeric value that controls the level of detail in debugging symbols.
Higher numbers make debugging easier at the cost of increased build time and
executable size.  The supported values depend on your compiler.  For GCC and
similar compilers, <strong>1</strong> includes line number tables and external variables,
<strong>2</strong> also includes local variables, and <strong>3</strong> also includes macro
definitions.</p>
</dd>
<dt>PDB_SYMBOLS</dt><dd><p>Set to <strong>1</strong> to generate CodeView format symbols in separate PDB files,
allowing source-level debugging using Microsoft Visual Studio or WinDbg.
It can also be used with other tools that can load symbols from PDB files,
e.g. the Intel VTune and AMD µProf performance analysis tools.  This option
is only supported for MinGW builds using the clang compiler and the LLVM
linker (lld).  This option only takes effect if the <strong>SYMBOLS</strong> option is
set to a non-zero value.</p>
</dd>
<dt>ARCHOPTS</dt><dd><p>Additional command-line options to pass to the compiler and linker.  This is
useful for supplying code generation or ABI options, for example to enable
support for optional CPU features.</p>
</dd>
<dt>ARCHOPTS_C</dt><dd><p>Additional command-line options to pass to the compiler when compiling C
source files.</p>
</dd>
<dt>ARCHOPTS_CXX</dt><dd><p>Additional command-line options to pass to the compiler when compiling C++
source files.</p>
</dd>
<dt>ARCHOPTS_OBJC</dt><dd><p>Additional command-line options to pass to the compiler when compiling
Objective-C source files.</p>
</dd>
<dt>ARCHOPTS_OBJCXX</dt><dd><p>Additional command-line options to pass to the compiler when compiling
Objective-C++ source files.</p>
</dd>
</dl>
</section>
<section id="library-framework-locations">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Library/framework locations</a><a class="headerlink" href="#library-framework-locations" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>SDL_INSTALL_ROOT</dt><dd><p>SDL installation root directory for shared library style SDL.</p>
</dd>
<dt>SDL_FRAMEWORK_PATH</dt><dd><p>Search path for SDL framework.</p>
</dd>
<dt>USE_LIBSDL</dt><dd><p>Set to <strong>1</strong> to use shared library style SDL on targets where framework is
default.</p>
</dd>
<dt>USE_SYSTEM_LIB_ASIO</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the Asio C++ asynchronous
I/O library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_EXPAT</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the Expat XML parser
library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_ZLIB</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the zlib data compression
library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_ZSTD</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the Zstandard data
compression library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_JPEG</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the libjpeg image
compression library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_FLAC</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the libFLAC audio
compression library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_LUA</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the embedded Lua
interpreter over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_SQLITE3</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the SQLITE embedded
database engine over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_PORTMIDI</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the PortMidi library over
the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_PORTAUDIO</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the PortAudio library over
the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_UTF8PROC</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the Julia utf8proc library
over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_GLM</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the GLM OpenGL Mathematics
library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_RAPIDJSON</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the Tencent RapidJSON
library over the version provided with the MAME source.</p>
</dd>
<dt>USE_SYSTEM_LIB_PUGIXML</dt><dd><p>Set to <strong>1</strong> to prefer the system installation of the pugixml library over
the version provided with the MAME source.</p>
</dd>
</dl>
</section>
</section>
<section id="known-issues">
<span id="compiling-issues"></span><h2><a class="toc-backref" href="#id21" role="doc-backlink">Known Issues</a><a class="headerlink" href="#known-issues" title="Link to this heading">¶</a></h2>
<section id="issues-with-specific-compiler-versions">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Issues with specific compiler versions</a><a class="headerlink" href="#issues-with-specific-compiler-versions" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>GCC 7 for 32-bit x86 targets produces spurious out-of-bounds access warnings.
Adding <strong>NOWERROR=1</strong> to your build options works around this by not treating
warnings as errors.</p></li>
</ul>
</section>
<section id="gnu-c-library-fortify-source-feature">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">GNU C Library fortify source feature</a><a class="headerlink" href="#gnu-c-library-fortify-source-feature" title="Link to this heading">¶</a></h3>
<p>The GNU C Library has options to perform additional compile- and run-time
checks on string operations, enabled by defining the <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code>
preprocessor macro.  This is intended to improve security at the cost of a
small amount of overhead.  MAME is not secure software, and we do not
support building with <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code> defined.</p>
<p>Some Linux distributions (including Gentoo and Ubuntu) have patched GCC to
define <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code> to <code class="docutils literal notranslate"><span class="pre">1</span></code> as a built-in macro.  This is problematic
for more projects than just MAME, as it makes it hard to disable the additional
checks (e.g. if you don’t want the performance impact of the run-time checks),
and it also makes it hard to define <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code> to <code class="docutils literal notranslate"><span class="pre">2</span></code> if you want to
enable stricter checks.  You should really take it up with the distribution
maintainers, and make it clear you don’t want non-standard GCC behaviour. It
would be better if these distributions defined this macro by default in their
packaging environments if they think it’s important, rather than trying to force
it on everything compiled on their distributions. (This is what Red Hat does:
the <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code> macro is set in the RPM build environment, and not by
distributing a modified version of GCC.)</p>
<p>If you get compilation errors in <code class="docutils literal notranslate"><span class="pre">bits/string_fortified.h</span></code> you should first
ensure that the <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code> macro is defined via the environment (e.g.
a <strong>CFLAGS</strong> or <strong>CXXFLAGS</strong> environment variable).  You can check to see
whether the <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code> macro is a built-in macro with your version of
GCC with a command like this:</p>
<p><strong>gcc -dM -E - &lt; /dev/null | grep _FORTIFY_SOURCE</strong></p>
<p>If <code class="docutils literal notranslate"><span class="pre">_FORTIFY_SOURCE</span></code> is defined to a non-zero value by default, you can work
around it by adding <strong>-U_FORTIFY_SOURCE</strong> to the compiler flags (e.g. by using
the <strong>ARCHOPTS</strong> setting, or setting the <strong>CFLAGS</strong> and <strong>CXXFLAGS</strong> environment
variables.</p>
</section>
<section id="issues-affecting-mingw-clang">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Issues affecting MinGW clang</a><a class="headerlink" href="#issues-affecting-mingw-clang" title="Link to this heading">¶</a></h3>
<p>MinGW clang and llvm can give spurious undefined symbol errors when linking
using CodeView format symbols with high symbol detail levels.  If you encounter
undefined symbol errors when linking with <strong>PDB_SYMBOLS=1</strong> to produce CodeView
format symbols, try setting <strong>SYMLEVEL=1</strong> to reduce the symbol detail level
(line number tables will still be included, but local variables will be
omitted).</p>
</section>
<section id="issues-affecting-microsoft-visual-studio">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Issues affecting Microsoft Visual Studio</a><a class="headerlink" href="#issues-affecting-microsoft-visual-studio" title="Link to this heading">¶</a></h3>
<p>Microsoft introduced a new version of XAudio2 with Windows 8 that’s incompatible
with the version included with DirectX for prior Windows versions at the API
level.  Newer versions of the Microsoft Windows SDK include headers and libraries
for the new version of XAudio2.  By default, the target Windows version is set to
Windows Vista (6.0) when compiling MAME, which prevents the use of this version
of the XAudio2 headers and libraries.  To build MAME with XAudio2 support using
the Microsoft Windows SDK, you must do one of the following:</p>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">MODERN_WIN_API=1</span></code> to the options passed to make when generating the
Visual Studio project files.  This will set the target Windows version to
Windows 8 (6.2).  The resulting binaries may not run on earlier versions of
Windows.</p></li>
<li><p>Install the <a class="reference external" href="https://www.microsoft.com/en-US/download/details.aspx?id=6812">DirectX SDK</a> (already included since Windows 8.0 SDK and
automatically installed with Visual Studio 2013 and later).  Configure the
<strong>osd_windows</strong> project to search the DirectX header/library paths before
searching the Microsoft Windows SDK paths.</p></li>
</ul>
<p>The MSVC compiler produces spurious warnings about potentially uninitialised
local variables.  You currently need to add <code class="docutils literal notranslate"><span class="pre">NOWERROR=1</span></code> to the options passed
to make when generating the Visual Studio project files.  This stops warnings
from being treated as errors.  (MSVC seems to lack options to control which
specific warnings are treated as errors, which other compilers support.)</p>
</section>
</section>
<section id="unusual-build-configurations">
<span id="compiling-unusual"></span><h2><a class="toc-backref" href="#id26" role="doc-backlink">Unusual Build Configurations</a><a class="headerlink" href="#unusual-build-configurations" title="Link to this heading">¶</a></h2>
<section id="linking-using-the-llvm-linker">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">Linking using the LLVM linker</a><a class="headerlink" href="#linking-using-the-llvm-linker" title="Link to this heading">¶</a></h3>
<p>The LLVM linker is generally faster than the GNU linker that GCC uses by
default.  This is more pronounced on systems with a high overhead for file
system operations (e.g. Microsoft Windows, or when compiling on a disk mounted
over a network).  To use the LLVM linker with GCC, ensure the LLVM linker is
installed and add <code class="docutils literal notranslate"><span class="pre">-fuse-ld=lld</span></code> to the linker options (e.g. in the
<strong>LDFLAGS</strong> environment variable or in the <strong>ARCHOPTS</strong> setting).</p>
</section>
<section id="cross-compiling-mame">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Cross-compiling MAME</a><a class="headerlink" href="#cross-compiling-mame" title="Link to this heading">¶</a></h3>
<p>MAME’s build system has basic support for cross-compilation.  Set
<strong>CROSS_BUILD=1</strong> to enable separate host and target compilers, set
<strong>OVERRIDE_CC</strong> and <strong>OVERRIDE_CXX</strong> to the target C/C++ compiler commands, and
if necessary set <strong>CC</strong> and <strong>CXX</strong> to the host C/C++ compiler commands.  If the
target OS is different to the host OS, set it with <strong>TARGETOS</strong>.  For example it
may be possible to build a MinGW32 x64 build on a Linux host using a command
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">TARGETOS</span><span class="o">=</span><span class="n">windows</span> <span class="n">PTR64</span><span class="o">=</span><span class="mi">1</span> <span class="n">OVERRIDE_CC</span><span class="o">=</span><span class="n">x86_64</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span><span class="o">-</span><span class="n">gcc</span> <span class="n">OVERRIDE_CXX</span><span class="o">=</span><span class="n">x86_64</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span><span class="o">-</span><span class="n">g</span><span class="o">++</span> <span class="n">OVERRIDE_LD</span><span class="o">=</span><span class="n">x86_64</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span><span class="o">-</span><span class="n">ld</span> <span class="n">MINGW64</span><span class="o">=/</span><span class="n">usr</span><span class="o">**</span>
</pre></div>
</div>
<p>(The additional packages required for producing a standard MinGW32 x64 build on
a Fedora Linux host are <code class="docutils literal notranslate"><span class="pre">mingw64-gcc-c++</span></code>, <code class="docutils literal notranslate"><span class="pre">mingw64-winpthreads-static</span></code> and
their dependencies.  Non-standard builds may require additional packages.)</p>
</section>
<section id="using-libc-on-linux">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Using libc++ on Linux</a><a class="headerlink" href="#using-libc-on-linux" title="Link to this heading">¶</a></h3>
<p>MAME may be built using the LLVM project’s “libc++” C++ Standard Library.  The
prerequisites are a working clang/LLVM installation, and the libc++ development
libraries.  On Fedora Linux, the necessary packages are <strong>libcxx</strong>,
<strong>libcxx-devel</strong>, <strong>libcxxabi</strong> and <strong>libcxxabi-devel</strong>.  Set the C and C++
compiler commands to use clang, and add <strong>-stdlib=libc++</strong> to the C++ compiler
and linker options.  You could use a command like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">env</span> <span class="n">LDFLAGS</span><span class="o">=-</span><span class="n">stdlib</span><span class="o">=</span><span class="n">libc</span><span class="o">++</span> <span class="n">make</span> <span class="n">OVERRIDE_CC</span><span class="o">=</span><span class="n">clang</span> <span class="n">OVERRIDE_CXX</span><span class="o">=</span><span class="n">clang</span><span class="o">++</span> <span class="n">ARCHOPTS_CXX</span><span class="o">=-</span><span class="n">stdlib</span><span class="o">=</span><span class="n">libc</span><span class="o">++</span> <span class="n">ARCHOPTS_OBJCXX</span><span class="o">=-</span><span class="n">stdlib</span><span class="o">=</span><span class="n">libc</span><span class="o">++</span>
</pre></div>
</div>
<p>The options following the <strong>make</strong> command may be placed in a prefix makefile if
you want to use this configuration regularly, but <strong>LDFLAGS</strong> needs to be be set
in the environment.</p>
</section>
<section id="using-a-gcc-gnu-libstdc-installation-in-a-non-standard-location-on-linux">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Using a GCC/GNU libstdc++ installation in a non-standard location on Linux</a><a class="headerlink" href="#using-a-gcc-gnu-libstdc-installation-in-a-non-standard-location-on-linux" title="Link to this heading">¶</a></h3>
<p>GCC may be built and installed to a custom location, typically by supplying the
<strong>--prefix=</strong> option to the <strong>configure</strong> command.  This may be useful if you
want to build MAME on a Linux distribution that still uses a version of GNU
libstdC++ that predates C++17 support.  To use an alternate GCC installation to,
build MAME, set the C and C++ compilers to the full paths to the <strong>gcc</strong> and
<strong>g++</strong> commands, and add the library path to the run-time search path.  If you
installed GCC in /opt/local/gcc72, you might use a command like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">OVERRIDE_CC</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">gcc72</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gcc</span> <span class="n">OVERRIDE_CXX</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">gcc72</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">g</span><span class="o">++</span> <span class="n">ARCHOPTS</span><span class="o">=-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">R</span><span class="p">,</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">gcc72</span><span class="o">/</span><span class="n">lib64</span>
</pre></div>
</div>
<p>You can add these options to a prefix makefile if you plan to use this
configuration regularly.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installingmame.html" class="btn btn-neutral float-left" title="Installing MAME" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="configuringmame.html" class="btn btn-neutral float-right" title="Configuring MAME" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1997-2026, MAMEdev and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>