<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lua Core Classes &mdash; MAME Documentation 0.278 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=be04ea20"></script>
        <script src="../_static/doctools.js?v=9bcbadda"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lua Device Classes" href="ref-devices.html" />
    <link rel="prev" title="Lua Common Types and Globals" href="ref-common.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MAME Documentation
          </a>
              <div class="version">
                0.278
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatis.html">What is MAME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../healthwarning.html">Health Warnings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../initialsetup/index.html">Getting MAME prepared</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingmame/index.html">Basic MAME Usage and Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandline/index.html">MAME Command-line Usage and OS-Specific Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugger/index.html">MAME Debugger</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Lua Scripting Interface</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ref-common.html">Lua Common Types and Globals</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Lua Core Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-devices.html">Lua Device Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-mem.html">Lua Memory System Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-input.html">Lua Input System Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-render.html">Lua Render System Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-debugger.html">Lua Debugger Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">MAME External Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to MAME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techspecs/index.html">Technical Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">MAME and security concerns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">The MAME License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MAME Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Lua Scripting Interface</a></li>
      <li class="breadcrumb-item active">Lua Core Classes</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lua-core-classes">
<span id="luascript-ref-core"></span><h1>Lua Core Classes<a class="headerlink" href="#lua-core-classes" title="Link to this heading">¶</a></h1>
<p>Many of MAME’s core classes used to implement an emulation session are available
to Lua scripts.</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#notifier-subscription" id="id25">Notifier subscription</a></p></li>
<li><p><a class="reference internal" href="#attotime" id="id26">Attotime</a></p></li>
<li><p><a class="reference internal" href="#mame-machine-manager" id="id27">MAME machine manager</a></p></li>
<li><p><a class="reference internal" href="#running-machine" id="id28">Running machine</a></p></li>
<li><p><a class="reference internal" href="#video-manager" id="id29">Video manager</a></p></li>
<li><p><a class="reference internal" href="#sound-manager" id="id30">Sound manager</a></p></li>
<li><p><a class="reference internal" href="#output-manager" id="id31">Output manager</a></p></li>
<li><p><a class="reference internal" href="#parameters-manager" id="id32">Parameters manager</a></p></li>
<li><p><a class="reference internal" href="#ui-manager" id="id33">UI manager</a></p></li>
<li><p><a class="reference internal" href="#system-driver-metadata" id="id34">System driver metadata</a></p></li>
<li><p><a class="reference internal" href="#lua-plugin" id="id35">Lua plugin</a></p></li>
</ul>
</nav>
<section id="notifier-subscription">
<span id="luascript-ref-notifiersub"></span><h2><a class="toc-backref" href="#id25" role="doc-backlink">Notifier subscription</a><a class="headerlink" href="#notifier-subscription" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">util::notifier_subscription</span></code> class, which manages a subscription
to a broadcast notification.</p>
<section id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>subscription:unsubscribe()</dt><dd><p>Unsubscribes from notifications.  The subscription will become inactive and
no future notifications will be received.</p>
</dd>
</dl>
</section>
<section id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>subscription.is_active (read-only)</dt><dd><p>A Boolean indicating whether the subscription is active.  A subscription
becomes inactive after explicitly unsubscribing or if the underlying
notifier is destroyed.</p>
</dd>
</dl>
</section>
</section>
<section id="attotime">
<span id="luascript-ref-attotime"></span><h2><a class="toc-backref" href="#id26" role="doc-backlink">Attotime</a><a class="headerlink" href="#attotime" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">attotime</span></code> class, which represents a high-precision time
interval.  Attotime values support addition and subtraction with other attotime
values, and multiplication and division by integers.</p>
<section id="instantiation">
<h3>Instantiation<a class="headerlink" href="#instantiation" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>emu.attotime()</dt><dd><p>Creates an attotime value representing zero (i.e. no elapsed time).</p>
</dd>
<dt>emu.attotime(seconds, attoseconds)</dt><dd><p>Creates an attotime with the specified whole and fractional parts.</p>
</dd>
<dt>emu.attotime(attotime)</dt><dd><p>Creates a copy of an existing attotime value.</p>
</dd>
<dt>emu.attotime.from_double(seconds)</dt><dd><p>Creates an attotime value representing the specified number of seconds.</p>
</dd>
<dt>emu.attotime.from_ticks(periods, frequency)</dt><dd><p>Creates an attotime representing the specified number of periods of the
specified frequency in Hertz.</p>
</dd>
<dt>emu.attotime.from_seconds(seconds)</dt><dd><p>Creates an attotime value representing the specified whole number of
seconds.</p>
</dd>
<dt>emu.attotime.from_msec(milliseconds)</dt><dd><p>Creates an attotime value representing the specified whole number of
milliseconds.</p>
</dd>
<dt>emu.attotime.from_usec(microseconds)</dt><dd><p>Creates an attotime value representing the specified whole number of
microseconds.</p>
</dd>
<dt>emu.attotime.from_nsec(nanoseconds)</dt><dd><p>Creates an attotime value representing the specified whole number of
nanoseconds.</p>
</dd>
</dl>
</section>
<section id="id1">
<h3>Methods<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>t:as_double()</dt><dd><p>Returns the time interval in seconds as a floating-point value.</p>
</dd>
<dt>t:as_hz()</dt><dd><p>Interprets the interval as a period and returns the corresponding frequency
in Hertz as a floating-point value.  Returns zero if <code class="docutils literal notranslate"><span class="pre">t.is_never</span></code> is true.
The interval must not be zero.</p>
</dd>
<dt>t:as_khz()</dt><dd><p>Interprets the interval as a period and returns the corresponding frequency
kilohertz as a floating-point value.  Returns zero if <code class="docutils literal notranslate"><span class="pre">t.is_never</span></code> is
true.  The interval must not be zero.</p>
</dd>
<dt>t:as_mhz()</dt><dd><p>Interprets the interval as a period and returns the corresponding frequency
megahertz as a floating-point value.  Returns zero if <code class="docutils literal notranslate"><span class="pre">t.is_never</span></code> is
true.  The interval must not be zero.</p>
</dd>
<dt>t:as_ticks(frequency)</dt><dd><p>Returns the interval as a whole number of periods at the specified
frequency.  The frequency is specified in Hertz.</p>
</dd>
</dl>
</section>
<section id="id2">
<h3>Properties<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>t.is_zero (read-only)</dt><dd><p>A Boolean indicating whether the value represents no elapsed time.</p>
</dd>
<dt>t.is_never (read-only)</dt><dd><p>A Boolean indicating whether the value is greater than the maximum number of
whole seconds that can be represented (treated as an unreachable time in the
future or overflow).</p>
</dd>
<dt>t.attoseconds (read-only)</dt><dd><p>The fraction seconds portion of the interval in attoseconds.</p>
</dd>
<dt>t.seconds (read-only)</dt><dd><p>The number of whole seconds in the interval.</p>
</dd>
<dt>t.msec (read-only)</dt><dd><p>The number of whole milliseconds in the fractional seconds portion of the
interval.</p>
</dd>
<dt>t.usec (read-only)</dt><dd><p>The number of whole microseconds in the fractional seconds portion of the
interval.</p>
</dd>
<dt>t.nsec (read-only)</dt><dd><p>The number of whole nanoseconds in the fractional seconds portion of the
interval.</p>
</dd>
</dl>
</section>
</section>
<section id="mame-machine-manager">
<span id="luascript-ref-mameman"></span><h2><a class="toc-backref" href="#id27" role="doc-backlink">MAME machine manager</a><a class="headerlink" href="#mame-machine-manager" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">mame_machine_manager</span></code> class, which holds the running machine, UI
manager, and other global components.</p>
<section id="id3">
<h3>Instantiation<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager</dt><dd><p>The MAME machine manager is available as a global variable in the Lua
environment.</p>
</dd>
</dl>
</section>
<section id="id4">
<h3>Properties<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.machine (read-only)</dt><dd><p>The <a class="reference internal" href="#luascript-ref-machine"><span class="std std-ref">running machine</span></a> for the current emulation
session.</p>
</dd>
<dt>manager.ui (read-only)</dt><dd><p>The <a class="reference internal" href="#luascript-ref-uiman"><span class="std std-ref">UI manager</span></a> for the current session.</p>
</dd>
<dt>manager.options (read-only)</dt><dd><p>The <span class="xref std std-ref">emulation options</span> for the current
session.</p>
</dd>
<dt>manager.plugins[] (read-only)</dt><dd><p>Gets information about the <a class="reference internal" href="#luascript-ref-plugin"><span class="std std-ref">Lua plugins</span></a> that
are present, indexed by name.  The index get, <code class="docutils literal notranslate"><span class="pre">at</span></code> and <code class="docutils literal notranslate"><span class="pre">index_of</span></code>
methods have O(n) complexity.</p>
</dd>
</dl>
</section>
</section>
<section id="running-machine">
<span id="luascript-ref-machine"></span><h2><a class="toc-backref" href="#id28" role="doc-backlink">Running machine</a><a class="headerlink" href="#running-machine" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">running_machine</span></code> class, which represents an emulation session.
It provides access to the other core objects that implement an emulation session
as well as the emulated device tree.</p>
<section id="id5">
<h3>Instantiation<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.machine</dt><dd><p>Gets the running machine instance for the current emulation session.</p>
</dd>
</dl>
</section>
<section id="id6">
<h3>Methods<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>machine:exit()</dt><dd><p>Schedules an exit from the current emulation session.  This will either
return to the system selection menu or exit the application, depending on
how it was started.  This method returns immediately, before the scheduled
exit takes place.</p>
</dd>
<dt>machine:hard_reset()</dt><dd><p>Schedules a hard reset.  This is implemented by tearing down the emulation
session and starting another emulation session for the same system.  This
method returns immediately, before the scheduled reset takes place.</p>
</dd>
<dt>machine:soft_reset()</dt><dd><p>Schedules a soft reset.  This is implemented by calling the reset method of
the root device, which is propagated down the device tree.  This method
returns immediately, before the scheduled reset takes place.</p>
</dd>
<dt>machine:save(filename)</dt><dd><p>Schedules saving machine state to the specified file.  If the file name is a
relative path, it is considered to be relative to the first configured save
state directory.  This method returns immediately, before the machine state
is saved.  If this method is called when a save or load operation is already
pending, the previously pending operation will be cancelled.</p>
</dd>
<dt>machine:load(filename)</dt><dd><p>Schedules loading machine state from the specified file.  If the file name
is a relative path, the configured save state directories will be searched.
This method returns immediately, before the machine state is saved.  If this
method is called when a save or load operation is already pending, the
previously pending operation will be cancelled.</p>
</dd>
<dt>machine:popmessage([msg])</dt><dd><p>Displays a pop-up message to the user.  If the message is not provided, the
currently displayed pop-up message (if any) will be hidden.</p>
</dd>
<dt>machine:logerror(msg)</dt><dd><p>Writes the message to the machine error log.  This may be displayed in a
debugger window, written to a file, or written to the standard error output.</p>
</dd>
</dl>
</section>
<section id="id7">
<h3>Properties<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>machine.time (read-only)</dt><dd><p>The elapsed emulated time for the current session as an
<a class="reference internal" href="#luascript-ref-attotime"><span class="std std-ref">attotime</span></a>.</p>
</dd>
<dt>machine.system (read-only)</dt><dd><p>The <a class="reference internal" href="#luascript-ref-driver"><span class="std std-ref">driver metadata</span></a> for the current
system.</p>
</dd>
<dt>machine.parameters (read-only)</dt><dd><p>The <a class="reference internal" href="#luascript-ref-paramman"><span class="std std-ref">parameters manager</span></a> for the current
emulation session.</p>
</dd>
<dt>machine.video (read-only)</dt><dd><p>The <a class="reference internal" href="#luascript-ref-videoman"><span class="std std-ref">video manager</span></a> for the current emulation
session.</p>
</dd>
<dt>machine.sound (read-only)</dt><dd><p>The <a class="reference internal" href="#luascript-ref-soundman"><span class="std std-ref">sound manager</span></a> for the current emulation
session.</p>
</dd>
<dt>machine.output (read-only)</dt><dd><p>The <a class="reference internal" href="#luascript-ref-outputman"><span class="std std-ref">output manager</span></a> for the current
emulation session.</p>
</dd>
<dt>machine.memory (read-only)</dt><dd><p>The <a class="reference internal" href="ref-mem.html#luascript-ref-memman"><span class="std std-ref">emulated memory manager</span></a> for the current
session.</p>
</dd>
<dt>machine.ioport (read-only)</dt><dd><p>The <a class="reference internal" href="ref-input.html#luascript-ref-ioportman"><span class="std std-ref">I/O port manager</span></a> for the current
emulation session.</p>
</dd>
<dt>machine.input (read-only)</dt><dd><p>The <a class="reference internal" href="ref-input.html#luascript-ref-inputman"><span class="std std-ref">input manager</span></a> for the current emulation
session.</p>
</dd>
<dt>machine.natkeyboard (read-only)</dt><dd><p>Gets the <a class="reference internal" href="ref-input.html#luascript-ref-natkbdman"><span class="std std-ref">natural keyboard manager</span></a>, used for
controlling keyboard and keypad input to the emulated system.</p>
</dd>
<dt>machine.uiinput (read-only)</dt><dd><p>The <a class="reference internal" href="ref-input.html#luascript-ref-uiinputman"><span class="std std-ref">UI input manager</span></a> for the current
emulation session.</p>
</dd>
<dt>machine.render (read-only)</dt><dd><p>The <a class="reference internal" href="ref-render.html#luascript-ref-renderman"><span class="std std-ref">render manager</span></a> for the current
emulation session.</p>
</dd>
<dt>machine.debugger (read-only)</dt><dd><p>The <a class="reference internal" href="ref-debugger.html#luascript-ref-debugman"><span class="std std-ref">debugger manager</span></a> for the current
emulation session, or <code class="docutils literal notranslate"><span class="pre">nil</span></code> if the debugger is not enabled.</p>
</dd>
<dt>machine.options (read-only)</dt><dd><p>The user-specified <span class="xref std std-ref">options</span> for the current
emulation session.</p>
</dd>
<dt>machine.samplerate (read-only)</dt><dd><p>The output audio sample rate in Hertz.</p>
</dd>
<dt>machine.paused (read-only)</dt><dd><p>A Boolean indicating whether emulation is not currently running, usually
because the session has been paused or the emulated system has not completed
starting.</p>
</dd>
<dt>machine.exit_pending (read-only)</dt><dd><p>A Boolean indicating whether the emulation session is scheduled to exit.</p>
</dd>
<dt>machine.hard_reset_pending (read-only)</dt><dd><p>A Boolean indicating whether a hard reset of the emulated system is pending.</p>
</dd>
<dt>machine.devices (read-only)</dt><dd><p>A <a class="reference internal" href="ref-devices.html#luascript-ref-devenum"><span class="std std-ref">device enumerator</span></a> that yields all
<a class="reference internal" href="ref-devices.html#luascript-ref-device"><span class="std std-ref">devices</span></a> in the emulated system.</p>
</dd>
<dt>machine.palettes (read-only)</dt><dd><p>A <a class="reference internal" href="ref-devices.html#luascript-ref-devenum"><span class="std std-ref">device enumerator</span></a> that yields all
<a class="reference internal" href="ref-devices.html#luascript-ref-dipalette"><span class="std std-ref">palette devices</span></a> in the emulated system.</p>
</dd>
<dt>machine.screens (read-only)</dt><dd><p>A <a class="reference internal" href="ref-devices.html#luascript-ref-devenum"><span class="std std-ref">device enumerator</span></a> that yields all
<a class="reference internal" href="ref-devices.html#luascript-ref-screendev"><span class="std std-ref">screen devices</span></a> in the emulated system.</p>
</dd>
<dt>machine.cassettes (read-only)</dt><dd><p>A <a class="reference internal" href="ref-devices.html#luascript-ref-devenum"><span class="std std-ref">device enumerator</span></a> that yields all
<a class="reference internal" href="ref-devices.html#luascript-ref-cassdev"><span class="std std-ref">cassette image devices</span></a> in the emulated
system.</p>
</dd>
<dt>machine.images (read-only)</dt><dd><p>A <a class="reference internal" href="ref-devices.html#luascript-ref-devenum"><span class="std std-ref">device enumerator</span></a> that yields all
<a class="reference internal" href="ref-devices.html#luascript-ref-diimage"><span class="std std-ref">media image devices</span></a> in the emulated system.</p>
</dd>
<dt>machine.slots (read-only)</dt><dd><p>A <a class="reference internal" href="ref-devices.html#luascript-ref-devenum"><span class="std std-ref">device enumerator</span></a> that yields all
<a class="reference internal" href="ref-devices.html#luascript-ref-dislot"><span class="std std-ref">slot devices</span></a> in the emulated system.</p>
</dd>
</dl>
</section>
</section>
<section id="video-manager">
<span id="luascript-ref-videoman"></span><h2><a class="toc-backref" href="#id29" role="doc-backlink">Video manager</a><a class="headerlink" href="#video-manager" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">video_manager</span></code> class, which is responsible for coordinating
emulated video drawing, speed throttling, and reading host inputs.</p>
<section id="id8">
<h3>Instantiation<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.machine.video</dt><dd><p>Gets the video manager for the current emulation session.</p>
</dd>
</dl>
</section>
<section id="id9">
<h3>Methods<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<dl>
<dt>video:frame_update()</dt><dd><p>Updates emulated screens, reads host inputs, and updates video output.</p>
</dd>
<dt>video:snapshot()</dt><dd><p>Saves snapshot files according to the current configuration.  If MAME is
configured to take native emulated screen snapshots, one snapshot will be
saved for each emulated screen that is visible in a host window/screen with
the current view configuration.  If MAME is not configured to use take
native emulated screen snapshots or if the system has no emulated screens, a
single snapshot will be saved using the currently selected snapshot view.</p>
</dd>
<dt>video:begin_recording([filename], [format])</dt><dd><p>Stops any video recordings currently in progress and starts recording either
the visible emulated screens or the current snapshot view, depending on
whether MAME is configured to take native emulated screen snapshots.</p>
<p>If the file name is not supplied, the configured snapshot file name is used.
If the file name is a relative path, it is interpreted relative to the first
configured snapshot directory.  If the format is supplied, it must be
<code class="docutils literal notranslate"><span class="pre">&quot;avi&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;mng&quot;</span></code>.  If the format is not supplied, it defaults to AVI.</p>
</dd>
<dt>video:end_recording()</dt><dd><p>Stops any video recordings that are in progress.</p>
</dd>
<dt>video:snapshot_size()</dt><dd><p>Returns the width and height in pixels of snapshots created with the current
snapshot target configuration and emulated screen state.  This may be
configured explicitly by the user, or calculated based on the selected
snapshot view and the resolution of any visible emulated screens.</p>
</dd>
<dt>video:snapshot_pixels()</dt><dd><p>Returns the pixels of a snapshot created using the current snapshot target
configuration as 32-bit integers packed into a binary string in host Endian
order.  Pixels are organised in row-major order, from left to right then top
to bottom.  Pixel values are colours in RGB format packed into 32-bit
integers.</p>
</dd>
</dl>
</section>
<section id="id10">
<h3>Properties<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>video.speed_factor (read-only)</dt><dd><p>Configured emulation speed adjustment in per mille (i.e. the ratio to normal
speed multiplied by 1,000).</p>
</dd>
<dt>video.throttled (read/write)</dt><dd><p>A Boolean indicating whether MAME should wait before video updates to avoid
running faster than the target speed.</p>
</dd>
<dt>video.throttle_rate (read/write)</dt><dd><p>The target emulation speed as a ratio of full speed adjusted by the speed
factor (i.e. 1 is normal speed adjusted by the speed factor, larger numbers
are faster, and smaller numbers are slower).</p>
</dd>
<dt>video.frameskip (read/write)</dt><dd><p>The number of emulated video frames to skip drawing out of every twelve, or
-1 to automatically adjust the number of frames to skip to maintain the
target emulation speed.</p>
</dd>
<dt>video.speed_percent (read-only)</dt><dd><p>The current emulated speed as a percentage of the full speed adjusted by the
speed factor.</p>
</dd>
<dt>video.effective_frameskip (read-only)</dt><dd><p>The number of emulated frames that are skipped out of every twelve.</p>
</dd>
<dt>video.skip_this_frame (read-only)</dt><dd><p>A Boolean indicating whether the video manager will skip drawing emulated
screens for the current frame.</p>
</dd>
<dt>video.snap_native (read-only)</dt><dd><p>A Boolean indicating whether the video manager will take native emulated
screen snapshots.  In addition to the relevant configuration setting, the
emulated system must have at least one emulated screen.</p>
</dd>
<dt>video.is_recording (read-only)</dt><dd><p>A Boolean indicating whether any video recordings are currently in progress.</p>
</dd>
<dt>video.snapshot_target (read-only)</dt><dd><p>The <a class="reference internal" href="ref-render.html#luascript-ref-rendertarget"><span class="std std-ref">render target</span></a> used to produce
snapshots and video recordings.</p>
</dd>
</dl>
</section>
</section>
<section id="sound-manager">
<span id="luascript-ref-soundman"></span><h2><a class="toc-backref" href="#id30" role="doc-backlink">Sound manager</a><a class="headerlink" href="#sound-manager" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">sound_manager</span></code> class, which manages the emulated sound stream
graph and coordinates sound output.</p>
<section id="id11">
<h3>Instantiation<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.machine.sound</dt><dd><p>Gets the sound manager for the current emulation session.</p>
</dd>
</dl>
</section>
<section id="id12">
<h3>Methods<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>sound:start_recording([filename])</dt><dd><p>Starts recording to a WAV file.  Has no effect if currently recording.  If
the file name is not supplied, uses the configured WAV file name (from
command line or INI file), or has no effect if no WAV file name is
configured.  Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if recording started, or <code class="docutils literal notranslate"><span class="pre">false</span></code> if
recording is already in progress, opening the output file failed, or no file
name was supplied or configured.</p>
</dd>
<dt>sound:stop_recording()</dt><dd><p>Stops recording and closes the file if currently recording to a WAV file.</p>
</dd>
<dt>sound:get_samples()</dt><dd><p>Returns the current contents of the output sample buffer as a binary string.
Samples are 16-bit integers in host byte order.  Samples for left and right
stereo channels are interleaved.</p>
</dd>
</dl>
</section>
<section id="id13">
<h3>Properties<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>sound.muted (read-only)</dt><dd><p>A Boolean indicating whether sound output is muted for any reason.</p>
</dd>
<dt>sound.ui_mute (read/write)</dt><dd><p>A Boolean indicating whether sound output is muted at the request of the
user.</p>
</dd>
<dt>sound.debugger_mute (read/write)</dt><dd><p>A Boolean indicating whether sound output is muted at the request of the
debugger.</p>
</dd>
<dt>sound.system_mute (read/write)</dt><dd><p>A Boolean indicating whether sound output is muted at the request of the
emulated system.</p>
</dd>
<dt>sound.volume (read/write)</dt><dd><p>The output volume in decibels.  Should generally be a negative or zero.</p>
</dd>
<dt>sound.recording (read-only)</dt><dd><p>A Boolean indicating whether sound output is currently being recorded to a
WAV file.</p>
</dd>
</dl>
</section>
</section>
<section id="output-manager">
<span id="luascript-ref-outputman"></span><h2><a class="toc-backref" href="#id31" role="doc-backlink">Output manager</a><a class="headerlink" href="#output-manager" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">output_manager</span></code> class, providing access to system outputs that
can be used for interactive artwork or consumed by external programs.</p>
<section id="id14">
<h3>Instantiation<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.machine.output</dt><dd><p>Gets the output manager for the current emulation session.</p>
</dd>
</dl>
</section>
<section id="id15">
<h3>Methods<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>output:set_value(name, val)</dt><dd><p>Sets the specified output value.  The value must be an integer.  The output
will be created if it does not already exist.</p>
</dd>
<dt>output:set_indexed_value(prefix, index, val)</dt><dd><p>Appends the index (formatted as a decimal integer) to the prefix and sets
the value of the corresponding output.  The value must be an integer.  The
output will be created if it does not already exist.</p>
</dd>
<dt>output:get_value(name)</dt><dd><p>Returns the value of the specified output, or zero if it doesn’t exist.</p>
</dd>
<dt>output:get_indexed_value(prefix, index)</dt><dd><p>Appends the index (formatted as a decimal integer) to the prefix and returns
the value of the corresponding output, or zero if it doesn’t exist.</p>
</dd>
<dt>output:name_to_id(name)</dt><dd><p>Gets the per-session unique integer ID for the specified output, or zero if
it doesn’t exist.</p>
</dd>
<dt>output:id_to_name(id)</dt><dd><p>Gets the name for the output with the specified per-session unique ID, or
<code class="docutils literal notranslate"><span class="pre">nil</span></code> if it doesn’t exist.  This method has O(n) complexity, so avoid
calling it when performance is important.</p>
</dd>
</dl>
</section>
</section>
<section id="parameters-manager">
<span id="luascript-ref-paramman"></span><h2><a class="toc-backref" href="#id32" role="doc-backlink">Parameters manager</a><a class="headerlink" href="#parameters-manager" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">parameters_manager</span></code> class, which provides a simple key-value
store for metadata from system ROM definitions.</p>
<section id="id16">
<h3>Instantiation<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.machine.parameters</dt><dd><p>Gets the parameters manager for the current emulation session.</p>
</dd>
</dl>
</section>
<section id="id17">
<h3>Methods<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>parameters:lookup(tag)</dt><dd><p>Gets the value for the specified parameter if it is set, or an empty string
if it is not set.</p>
</dd>
<dt>parameters:add(tag, value)</dt><dd><p>Sets the specified parameter if it is not set.  Has no effect if the
specified parameter is already set.</p>
</dd>
</dl>
</section>
</section>
<section id="ui-manager">
<span id="luascript-ref-uiman"></span><h2><a class="toc-backref" href="#id33" role="doc-backlink">UI manager</a><a class="headerlink" href="#ui-manager" title="Link to this heading">¶</a></h2>
<p>Wraps MAME’s <code class="docutils literal notranslate"><span class="pre">mame_ui_manager</span></code> class, which handles menus and other user
interface functionality.</p>
<section id="id18">
<h3>Instantiation<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.ui</dt><dd><p>Gets the UI manager for the current session.</p>
</dd>
</dl>
</section>
<section id="id19">
<h3>Methods<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>ui:get_char_width(ch)</dt><dd><p>Gets the width of a Unicode character as a proportion of the width of the UI
container in the current font at the configured UI line height.</p>
</dd>
<dt>ui:get_string_width(str)</dt><dd><p>Gets the width of a string as a proportion of the width of the UI container
in the current font at the configured UI line height.</p>
</dd>
<dt>ui:set_aggressive_input_focus(enable)</dt><dd><p>On some platforms, this controls whether MAME should accept input focus in
more situations than when its windows have UI focus.</p>
</dd>
<dt>ui:get_general_input_setting(type, [player])</dt><dd><p>Gets a description of the configured
<a class="reference internal" href="ref-input.html#luascript-ref-inputseq"><span class="std std-ref">input sequence</span></a> for the specified input type
and player suitable for using in prompts.  The input type is an enumerated
value.  The player number is a zero-based index.  If the player number is
not supplied, it is assumed to be zero.</p>
</dd>
</dl>
</section>
<section id="id20">
<h3>Properties<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>ui.options (read-only)</dt><dd><p>The UI <span class="xref std std-ref">options</span> for the current session.</p>
</dd>
<dt>ui.line_height (read-only)</dt><dd><p>The configured UI text line height as a proportion of the height of the UI
container.</p>
</dd>
<dt>ui.menu_active (read-only)</dt><dd><p>A Boolean indicating whether an interactive UI element is currently active.
Examples include menus and slider controls.</p>
</dd>
<dt>ui.ui_active (read/write)</dt><dd><p>A Boolean indicating whether UI control inputs are currently enabled.</p>
</dd>
<dt>ui.single_step (read/write)</dt><dd><p>A Boolean controlling whether the emulated system should be automatically
paused when the next frame is drawn.  This property is automatically reset
when the automatic pause happens.</p>
</dd>
<dt>ui.show_fps (read/write)</dt><dd><p>A Boolean controlling whether the current emulation speed and frame skipping
settings should be displayed.</p>
</dd>
<dt>ui.show_profiler (read/write)</dt><dd><p>A Boolean controlling whether profiling statistics should be displayed.</p>
</dd>
</dl>
</section>
</section>
<section id="system-driver-metadata">
<span id="luascript-ref-driver"></span><h2><a class="toc-backref" href="#id34" role="doc-backlink">System driver metadata</a><a class="headerlink" href="#system-driver-metadata" title="Link to this heading">¶</a></h2>
<p>Provides some metadata for an emulated system.</p>
<section id="id21">
<h3>Instantiation<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>emu.driver_find(name)</dt><dd><p>Gets the driver metadata for the system with the specified short name, or
<code class="docutils literal notranslate"><span class="pre">nil</span></code> if no such system exists.</p>
</dd>
<dt>manager.machine.system</dt><dd><p>Gets the driver metadata for the current system.</p>
</dd>
</dl>
</section>
<section id="id22">
<h3>Properties<a class="headerlink" href="#id22" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>driver.name (read-only)</dt><dd><p>The short name of the system, as used on the command line, in configuration
files, and when searching for resources.</p>
</dd>
<dt>driver.description (read-only)</dt><dd><p>The full display name for the system.</p>
</dd>
<dt>driver.year (read-only)</dt><dd><p>The release year for the system.  May contain question marks if not known
definitively.</p>
</dd>
<dt>driver.manufacturer (read-only)</dt><dd><p>The manufacturer, developer or distributor of the system.</p>
</dd>
<dt>driver.parent (read-only)</dt><dd><p>The short name of parent system for organisation purposes, or <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code> if the
system has no parent.</p>
</dd>
<dt>driver.compatible_with (read-only)</dt><dd><p>The short name of a system that this system is compatible with software for,
or <code class="docutils literal notranslate"><span class="pre">nil</span></code> if the system is not listed as compatible with another system.</p>
</dd>
<dt>driver.source_file (read-only)</dt><dd><p>The source file where this system driver is defined.  The path format
depends on the toolchain the emulator was built with.</p>
</dd>
<dt>driver.rotation (read-only)</dt><dd><p>A string indicating the rotation applied to all screens in the system after
the screen orientation specified in the machine configuration is applied.
Will be one of <code class="docutils literal notranslate"><span class="pre">&quot;rot0&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;rot90&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;rot180&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;rot270&quot;</span></code>.</p>
</dd>
<dt>driver.not_working (read-only)</dt><dd><p>A Boolean indicating whether the system is marked as not working.</p>
</dd>
<dt>driver.supports_save (read-only)</dt><dd><p>A Boolean indicating whether the system supports save states.</p>
</dd>
<dt>driver.no_cocktail (read-only)</dt><dd><p>A Boolean indicating whether screen flipping in cocktail mode is
unsupported.</p>
</dd>
<dt>driver.is_bios_root (read-only)</dt><dd><p>A Boolean indicating whether this system represents a system that runs
software from removable media without media present.</p>
</dd>
<dt>driver.requires_artwork (read-only)</dt><dd><p>A Boolean indicating whether the system requires external artwork to be
usable.</p>
</dd>
<dt>driver.unofficial (read-only)</dt><dd><p>A Boolean indicating whether this is an unofficial but common user
modification to a system.</p>
</dd>
<dt>driver.no_sound_hw (read-only)</dt><dd><p>A Boolean indicating whether the system has no sound output hardware.</p>
</dd>
<dt>driver.mechanical (read-only)</dt><dd><p>A Boolean indicating whether the system depends on mechanical features that
cannot be properly simulated.</p>
</dd>
<dt>driver.is_incomplete (read-only)</dt><dd><p>A Boolean indicating whether the system is a prototype with incomplete
functionality.</p>
</dd>
</dl>
</section>
</section>
<section id="lua-plugin">
<span id="luascript-ref-plugin"></span><h2><a class="toc-backref" href="#id35" role="doc-backlink">Lua plugin</a><a class="headerlink" href="#lua-plugin" title="Link to this heading">¶</a></h2>
<p>Provides a description of an available Lua plugin.</p>
<section id="id23">
<h3>Instantiation<a class="headerlink" href="#id23" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>manager.plugins[name]</dt><dd><p>Gets the description of the Lua plugin with the specified name, or <code class="docutils literal notranslate"><span class="pre">nil</span></code>
if no such plugin is available</p>
</dd>
</dl>
</section>
<section id="id24">
<h3>Properties<a class="headerlink" href="#id24" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>plugin.name (read-only)</dt><dd><p>The short name of the plugin, used in configuration and when accessing the
plugin programmatically.</p>
</dd>
<dt>plugin.description (read-only)</dt><dd><p>The display name for the plugin.</p>
</dd>
<dt>plugin.type (read-only)</dt><dd><p>The plugin type.  May be <code class="docutils literal notranslate"><span class="pre">&quot;plugin&quot;</span></code> for user-loadable plugins, or
<code class="docutils literal notranslate"><span class="pre">&quot;library&quot;</span></code> for libraries providing common functionality to multiple
plugins.</p>
</dd>
<dt>plugin.directory (read-only)</dt><dd><p>The path to the directory containing the plugin’s files.</p>
</dd>
<dt>plugin.start (read-only)</dt><dd><p>A Boolean indicating whether the plugin enabled.</p>
</dd>
</dl>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ref-common.html" class="btn btn-neutral float-left" title="Lua Common Types and Globals" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ref-devices.html" class="btn btn-neutral float-right" title="Lua Device Classes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1997-2025, MAMEdev and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>