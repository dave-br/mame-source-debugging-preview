<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stable Controller IDs &mdash; MAME Documentation 0.278 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=be04ea20"></script>
        <script src="../_static/doctools.js?v=9bcbadda"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Linux Lightguns" href="linux-lightguns.html" />
    <link rel="prev" title="Controller Configuration Files" href="ctrlr_config.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MAME Documentation
          </a>
              <div class="version">
                0.278
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatis.html">What is MAME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../healthwarning.html">Health Warnings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../initialsetup/index.html">Getting MAME prepared</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingmame/index.html">Basic MAME Usage and Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandline/index.html">MAME Command-line Usage and OS-Specific Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Advanced configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="multiconfig.html">Multiple Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="paths.html">MAME Path Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="shiftertoggle.html">Shifter Toggle Disable</a></li>
<li class="toctree-l2"><a class="reference internal" href="bgfx.html">BGFX Effects for (nearly) Everyone</a></li>
<li class="toctree-l2"><a class="reference internal" href="hlsl.html">HLSL Effects for Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="glsl.html">GLSL Effects for *nix, OS X, and Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctrlr_config.html">Controller Configuration Files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Stable Controller IDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux-lightguns.html">Linux Lightguns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../debugger/index.html">MAME Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../luascript/index.html">Lua Scripting Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">MAME External Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to MAME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techspecs/index.html">Technical Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">MAME and security concerns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">The MAME License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MAME Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Advanced configuration</a></li>
      <li class="breadcrumb-item active">Stable Controller IDs</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="stable-controller-ids">
<span id="devicemap"></span><h1>Stable Controller IDs<a class="headerlink" href="#stable-controller-ids" title="Link to this heading">¶</a></h1>
<p>By default, MAME does not assign stable numbers to input devices.  For instance,
a game pad controller may be assigned to “Joy 1” initially, but after
restarting, the same game pad may be reassigned to “Joy 3”.</p>
<p>The reason is that MAME assigns numbers to input devices in the based on
enumeration order.  Factors that can cause this to change include disconnecting
and reconnecting USB or Bluetooth devices, changing ports/hubs, and even just
restarting the computer.  Input device numbers can be quite unpredictable.</p>
<p>This is where the <code class="docutils literal notranslate"><span class="pre">mapdevice</span></code> configuration setting comes into the picture.
By adding this setting to a <a class="reference internal" href="ctrlr_config.html#ctrlrcfg"><span class="std std-ref">controller configuration file</span></a>, you
can ensure that a given input device is always assigned the same number in MAME.</p>
<section id="using-mapdevice">
<h2>Using mapdevice<a class="headerlink" href="#using-mapdevice" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">mapdevice</span></code> XML element is added to the <code class="docutils literal notranslate"><span class="pre">input</span></code> XML element in the
controller configuration file. It requires two attributes, <code class="docutils literal notranslate"><span class="pre">device</span></code> and
<code class="docutils literal notranslate"><span class="pre">controller</span></code>.  Note that <code class="docutils literal notranslate"><span class="pre">mapdevice</span></code> elements only take effect in the
controller configuration file (set using the <a class="reference internal" href="../commandline/commandline-all.html#mame-commandline-ctrlr"><span class="std std-ref">-ctrlr option</span></a>) – they are ignored in system configuration files and
the default configuration file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">device</span></code> attribute specifies the device ID of the input device to match.
It may also be a substring of the device ID.  To obtain the device ID for an
input device, select it in the <a class="reference internal" href="../usingmame/mamemenus.html#menus-inputdevices"><span class="std std-ref">Input Devices menu</span></a>, and then select <strong>Copy
Device ID</strong>.  The device ID will be copied to the clipboard.  You can also see
input device IDs by turning on verbose logging (more on this later).  The format
of device IDs depends the type of device, selected input provider module and
operating system.  Your input device IDs may look very different to the examples
here.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">controller</span></code> attribute specifies the input token for the input device type
(i.e. <code class="docutils literal notranslate"><span class="pre">JOYCODE</span></code>, <code class="docutils literal notranslate"><span class="pre">GUNCODE</span></code>, <code class="docutils literal notranslate"><span class="pre">MOUSECODE</span></code>) and number to assign to the
device, separated by an underscore.  Numbering starts from 1.  For example the
token for the first joystick device will be <code class="docutils literal notranslate"><span class="pre">JOYCODE_1</span></code>, the second will be
<code class="docutils literal notranslate"><span class="pre">JOYCODE_2</span></code>, and so on.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h2>
<p>Here’s an example:</p>
<div class="line-block">
<div class="line">&lt;mameconfig version=&quot;10&quot;&gt;</div>
<div class="line-block">
<div class="line">&lt;system name=&quot;default&quot;&gt;</div>
<div class="line-block">
<div class="line">&lt;input&gt;</div>
<div class="line-block">
<div class="line"><strong>&lt;mapdevice device=&quot;VID_D209&amp;amp;PID_1601&quot; controller=&quot;GUNCODE_1&quot; /&gt;</strong></div>
<div class="line"><strong>&lt;mapdevice device=&quot;VID_D209&amp;amp;PID_1602&quot; controller=&quot;GUNCODE_2&quot; /&gt;</strong></div>
<div class="line"><strong>&lt;mapdevice device=&quot;XInput Player 1&quot; controller=&quot;JOYCODE_1&quot; /&gt;</strong></div>
<div class="line"><strong>&lt;mapdevice device=&quot;XInput Player 2&quot; controller=&quot;JOYCODE_2&quot; /&gt;</strong></div>
<div class="line"><br /></div>
<div class="line">&lt;port type=&quot;P1_JOYSTICK_UP&quot;&gt;</div>
<div class="line-block">
<div class="line">&lt;newseq type=&quot;standard&quot;&gt;</div>
<div class="line-block">
<div class="line">JOYCODE_1_YAXIS_UP_SWITCH OR KEYCODE_8PAD</div>
</div>
<div class="line">&lt;/newseq&gt;</div>
</div>
<div class="line">&lt;/port&gt;</div>
<div class="line">...</div>
</div>
</div>
</div>
</div>
<p>In the above example, we have four device mappings specified:</p>
<ul class="simple">
<li><p>The first two <code class="docutils literal notranslate"><span class="pre">mapdevice</span></code> elements map player 1 and 2 light guns to Gun 1
and Gun 2, respectively.  We use a substring of the full device IDs to match
each devices.  Note that, since this is XML, we needed to escape the
ampersands (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>) as <code class="docutils literal notranslate"><span class="pre">&amp;amp;</span></code>.</p></li>
<li><p>The last two <code class="docutils literal notranslate"><span class="pre">mapdevices</span></code> elements map player 1 and player 2 gamepad
controllers to Joy 1 and Joy 2, respectively.  In this case, these are XInput
game controllers.</p></li>
</ul>
</section>
<section id="listing-available-devices">
<h2>Listing Available Devices<a class="headerlink" href="#listing-available-devices" title="Link to this heading">¶</a></h2>
<p>There are two ways to obtain device IDs: by copying them from the
<a class="reference internal" href="../usingmame/mamemenus.html#menus-inputdevices"><span class="std std-ref">Input Devices menu</span></a>, or by <a class="reference internal" href="../commandline/commandline-all.html#mame-commandline-verbose"><span class="std std-ref">turning on verbose logging</span></a> and finding the messages logged when input devices
are added.</p>
<p>To reach the Input Devices menu from the system selection menu, select <strong>General
Settings</strong>, and the select <strong>Input Devices</strong>.  To reach the input devices menu
from the <a class="reference internal" href="../usingmame/mamemenus.html#menus-main"><span class="std std-ref">main menu</span></a>, select <strong>Input Settings</strong>, then select
<strong>Input Devices</strong>.  From the Input Devices menu, select a device, then select
<strong>Copy Device ID</strong> to copy its device ID to the clipboard.</p>
<p>To use verbose logging, run MAME with the <code class="docutils literal notranslate"><span class="pre">-v</span></code> or <code class="docutils literal notranslate"><span class="pre">-verbose</span></code> option on the
command line.  Search the output for messages starting with “Input: Adding…”
that show recognised input devices and their respective IDs.</p>
<p>Here an example:</p>
<div class="line-block">
<div class="line">Input: Adding lightgun #1:</div>
<div class="line">Input: Adding lightgun #2:</div>
<div class="line">Input: Adding lightgun #3: HID-compliant mouse (<strong>device id: \\?\HID#VID_045E&amp;PID_0053#7&amp;18297dcb&amp;0&amp;0000#{378de44c-56ef-11d1-bc8c-00a0c91405dd}</strong>)</div>
<div class="line">Input: Adding lightgun #4: HID-compliant mouse (<strong>device id: \\?\HID#IrDeviceV2&amp;Col08#2&amp;2818a073&amp;0&amp;0007#{378de44c-56ef-11d1-bc8c-00a0c91405dd}</strong>)</div>
<div class="line">Input: Adding lightgun #5: HID-compliant mouse (<strong>device id: \\?\HID#VID_D209&amp;PID_1602&amp;MI_02#8&amp;389ab7f3&amp;0&amp;0000#{378de44c-56ef-11d1-bc8c-00a0c91405dd}</strong>)</div>
<div class="line">Input: Adding lightgun #6: HID-compliant mouse (<strong>device id: \\?\HID#VID_D209&amp;PID_1601&amp;MI_02#9&amp;375eebb1&amp;0&amp;0000#{378de44c-56ef-11d1-bc8c-00a0c91405dd}</strong>)</div>
<div class="line">Input: Adding lightgun #7: HID-compliant mouse (<strong>device id: \\?\HID#VID_1241&amp;PID_1111#8&amp;198f3adc&amp;0&amp;0000#{378de44c-56ef-11d1-bc8c-00a0c91405dd}</strong>)</div>
<div class="line">Skipping DirectInput for XInput compatible joystick Controller (XBOX 360 For Windows).</div>
<div class="line">Input: Adding joystick #1: ATRAK Device #1 (<strong>device id: ATRAK Device #1</strong>)</div>
<div class="line">Skipping DirectInput for XInput compatible joystick Controller (XBOX 360 For Windows).</div>
<div class="line">Input: Adding joystick #2: ATRAK Device #2 (<strong>device id: ATRAK Device #2</strong>)</div>
<div class="line">Input: Adding joystick #3: XInput Player 1 (<strong>device id: XInput Player 1</strong>)</div>
<div class="line">Input: Adding joystick #4: XInput Player 2 (<strong>device id: XInput Player 2</strong>)</div>
<div class="line"><br /></div>
</div>
<p>Furthermore, when devices are reassigned using <code class="docutils literal notranslate"><span class="pre">mapdevice</span></code> elements in the
controller configuration file, you’ll see that in the verbose log output, too,
such as:</p>
<div class="line-block">
<div class="line">Input: Remapped lightgun #1: HID-compliant mouse (device id: \\?\HID#VID_D209&amp;PID_1601&amp;MI_02#9&amp;375eebb1&amp;0&amp;0000#{378de44c-56ef-11d1-bc8c-00a0c91405dd})</div>
<div class="line">Input: Remapped lightgun #2: HID-compliant mouse (device id: \\?\HID#VID_D209&amp;PID_1602&amp;MI_02#8&amp;389ab7f3&amp;0&amp;0000#{378de44c-56ef-11d1-bc8c-00a0c91405dd})</div>
<div class="line">Input: Remapped joystick #1: XInput Player 1 (device id: XInput Player 1)</div>
<div class="line">Input: Remapped joystick #2: XInput Player 2 (device id: XInput Player 2)</div>
<div class="line"><br /></div>
</div>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Link to this heading">¶</a></h2>
<p>You can only assign stable numbers to devices if MAME receives stable, unique
device IDs from the input device provider and operating system.  This is not
always the case.  For example the SDL joystick provider is not capable of
providing unique IDs for many USB game controllers.</p>
<p>If not all configured devices are connected when MAME starts, the devices that
are connected may not be numbered as expected.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ctrlr_config.html" class="btn btn-neutral float-left" title="Controller Configuration Files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="linux-lightguns.html" class="btn btn-neutral float-right" title="Linux Lightguns" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1997-2025, MAMEdev and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>